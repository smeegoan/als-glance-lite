"use strict";var colorbrewer=colorbrewer||{numClasses:7,schemeNames:{sequential:["BuGn","BuPu","GnBu","OrRd","PuBu","PuBuGn","PuRd","RdPu","YlGn","YlGnBu","YlOrBr","YlOrRd"],singlehue:["Blues","Greens","Greys","Oranges","Purples","Reds"],diverging:["BrBG","PiYG","PRGn","PuOr","RdBu","RdGy","RdYlBu","RdYlGn","Spectral"],qualitative:["Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3"]},setNumClasses:function(n){colorbrewer.numClasses=n;colorbrewer.showSchemes()},setSchemeType:function(n){colorbrewer.selectedSchemeType=n;$("#num-classes option").removeAttr("disabled");switch(colorbrewer.selectedSchemeType){case"sequential":$("#num-classes").val()>=10&&($("#num-classes").val(9),colorbrewer.numClasses=9);$("#num-classes option[name=10], #num-classes option[name=11], #num-classes option[name=12]").attr("disabled","disabled");break;case"diverging":$("#num-classes").val()>=12&&($("#num-classes").val(11),colorbrewer.numClasses=11);$("#num-classes option[name=12]").attr("disabled","disabled")}colorbrewer.showSchemes()},showSchemes:function(){var r,t,i,n;$("#ramps").empty();for(i in colorbrewer.schemeNames[colorbrewer.selectedSchemeType])if(colorbrewer.checkFilters(colorbrewer.schemeNames[colorbrewer.selectedSchemeType][i])!=!1){for(r=$("<div class='ramp "+colorbrewer.schemeNames[colorbrewer.selectedSchemeType][i]+"'><\/div>"),t="<svg width='15' height='75'>",n=0;n<5;n++)t+="<rect fill="+colorbrewer.schemes[colorbrewer.schemeNames[colorbrewer.selectedSchemeType][i]][5][n]+" width='15' height='15' y='"+n*15+"'/>";t+="<\/svg>";$("#ramps").append(r.append(t).click(function(){$(this).hasClass("selected")||(colorbrewer.setScheme($(this).attr("class").substr(5)),analytics.logUiEvent("changeColor","Patient","dashboard"))}))}if(colorbrewer.selectedSchemeType=="sequential"){$("#scheme1").css("width","160px");$("#multi").show().text("Multi-hue");$("#scheme2").css("width","90px");$("#single").show().text("Single hue");$("#singlehue").empty().css("display","inline-block");for(i in colorbrewer.schemeNames.singlehue)if(colorbrewer.checkFilters(colorbrewer.schemeNames.singlehue[i])!=!1){for(r=$("<div class='ramp "+colorbrewer.schemeNames.singlehue[i]+"'><\/div>"),t="<svg width='15' height='75'>",n=0;n<5;n++)t+="<rect fill="+colorbrewer.schemes[colorbrewer.schemeNames.singlehue[i]][5][n]+" width='15' height='15' y='"+n*15+"'/>";t+="<\/svg>";$("#singlehue").append(r.append(t).click(function(){$(this).hasClass("selected")||(colorbrewer.setScheme($(this).attr("class").substr(5)),analytics.logUiEvent("changeColor","Patient","dashboard"))}))}}else $("#scheme1").css("width","100%"),$("#multi").hide(),$("#singlehue").empty(),$("#single").hide();$(".score-icon").show();$("#color-system").show();$(".ramp."+colorbrewer.selectedScheme)[0]?colorbrewer.setScheme(colorbrewer.selectedScheme):$("#ramps").children().length?colorbrewer.setScheme($("#ramps .ramp:first-child").attr("class").substr(5)):colorbrewer.clearSchemes()},clearSchemes:function(){$("#counties g path").css("fill","#ccc");$("#color-chips").empty();$("#color-values").empty();$("#ramps").css("width","100%");$("#scheme-name").html("");$(".score-icon").hide();$("#color-system").hide();$("#ramps").append("<p>No color schemes match these criteria.<\/p><p>Please choose fewer data classes, a different data type, and/or fewer filtering options.<\/p>")},setScheme:function(n){function f(n){return n?n==1?"":n==2?"possibly not ":"":"not "}var r,u,i,t;for($(".ramp.selected").removeClass("selected"),colorbrewer.selectedScheme=n,$(".ramp."+colorbrewer.selectedScheme).addClass("selected"),$("#scheme-name").html(colorbrewer.numClasses+"-class "+colorbrewer.selectedScheme),colorbrewer.applyColors(),colorbrewer.drawColorChips(),r="[",i=0;i<colorbrewer.numClasses;i++)r+="'"+colorbrewer.schemes[colorbrewer.selectedScheme][colorbrewer.numClasses][i]+"'",i<colorbrewer.numClasses-1&&(r+=",");for(r+="]",$("#copy-json input").val(r),u="",i=0;i<colorbrewer.numClasses;i++)u+="."+colorbrewer.selectedScheme+" .q"+i+"-"+colorbrewer.numClasses+"{fill:"+colorbrewer.schemes[colorbrewer.selectedScheme][colorbrewer.numClasses][i]+"}",i<colorbrewer.numClasses-1&&(u+=" ");$("#copy-css input").val(u);$(".score-icon").attr("class","score-icon");t=colorbrewer.checkColorblind(n);$("#blind-icon").addClass(t?t==1?"ok":"maybe":"bad").attr("title",colorbrewer.numClasses+"-class "+colorbrewer.selectedScheme+" is "+f(t)+"color blind friendly");t=1;$("#copy-icon").addClass(t?t==1?"ok":"maybe":"bad").attr("title",colorbrewer.numClasses+"-class "+colorbrewer.selectedScheme+" is "+f(t)+"photocopy friendly");t=colorbrewer.checkScreen(n);$("#screen-icon").addClass(t?t==1?"ok":"maybe":"bad").attr("title",colorbrewer.numClasses+"-class "+colorbrewer.selectedScheme+" is "+f(t)+"LCD friendly");t=colorbrewer.checkPrint(n);$("#print-icon").addClass(t?t==1?"ok":"maybe":"bad").attr("title",colorbrewer.numClasses+"-class "+colorbrewer.selectedScheme+" is "+f(t)+"print friendly")},checkFilters:function(n){return colorbrewer.schemes[n][colorbrewer.numClasses]?colorbrewer.checkColorblind(n)!=1?!1:!0:!1},checkColorblind:function(n){return colorbrewer.schemes[n].properties.blind.length>1?colorbrewer.schemes[n].properties.blind[colorbrewer.numClasses-3]:colorbrewer.schemes[n].properties.blind[0]},checkPrint:function(n){return colorbrewer.schemes[n].properties.print.length>1?colorbrewer.schemes[n].properties.print[colorbrewer.numClasses-3]:colorbrewer.schemes[n].properties.print[0]},checkScreen:function(n){return colorbrewer.schemes[n].properties.screen.length>1?colorbrewer.schemes[n].properties.screen[colorbrewer.numClasses-3]:colorbrewer.schemes[n].properties.screen[0]},drawColorChips:function(){for(var t="<svg width='24' height='270'>",n=0;n<colorbrewer.numClasses;n++)t+="<rect fill="+colorbrewer.schemes[colorbrewer.selectedScheme][colorbrewer.numClasses][n]+" width='24' height='"+Math.min(24,parseInt(265/colorbrewer.numClasses))+"' y='"+n*Math.min(24,parseInt(265/colorbrewer.numClasses))+"'/>";$("#color-chips").empty().append(t)},getColorDisplay:function(n,t){var u,i,r;return(n.indexOf("#")!=0&&(u=n.replace(/[a-z()\s]/g,"").split(","),i={r:u[0],g:u[1],b:u[2]}),t=t||$("#color-system").val().toLowerCase(),t=="hex")?i?rgbToHex(i.r,i.g,i.b):n:t=="rgb"?(i||(i=hexToRgb(n)),i.r+","+i.g+","+i.b):t=="cmyk"?(i||(i=hexToRgb(n)),r=rgb2cmyk(i.r,i.g,i.b),r[0]+","+r[1]+","+r[2]+","+r[3]):void 0},getCMYK:function(n,t,i){return cmyk[n][t][i].toString()},rgb2cmyk:function(n,t,i){var u=0,f=0,e=0,o=0,r;return n==0&&t==0&&i==0?(o=1,[0,0,0,100]):(u=1-n/255,f=1-t/255,e=1-i/255,r=Math.min(u,Math.min(f,e)),u=(u-r)/(1-r),f=(f-r)/(1-r),e=(e-r)/(1-r),o=r,[Math.round(u*100),Math.round(f*100),Math.round(e*100),Math.round(o*100)])},rgbToHex:function(n,t,i){return"#"+(16777216|n<<16|t<<8|i).toString(16).slice(1)},hexToRgb:function(n){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},showColorSchemeButton:function(n){$("#colorPlaceHolder").replaceWith(' <li class="dropdown">   <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">'+alsglance.resources.colorSchemes+'<span class="caret"><\/span><\/a>    <ul class="dropdown-menu" role="menu">        <li>            <div class="container" style="max-width: 300px">                <div id="scheme" class="form-group">                    <div id="scheme1">                        <label id="multi"><\/label>                        <div id="ramps"><\/div>                    <\/div> <!--end scheme1 div-->                    <div id="scheme2">                        <label id="single"><\/label>                        <div id="singlehue"><\/div>                    <\/div> <!--end scheme2 div-->                <\/div> <!--end scheme div-->            <\/div>        <\/li>    <\/ul><\/li>');var i=n||"YlGnBu",t=5;$("#num-classes").val(t);colorbrewer.setSchemeType("sequential");colorbrewer.setNumClasses(t);colorbrewer.setScheme(i);colorbrewer.showSchemes()},applyColors:function(){var n;if(colorbrewer.schemes[colorbrewer.selectedScheme][colorbrewer.numClasses]){n=colorbrewer.schemes[colorbrewer.selectedScheme][colorbrewer.numClasses].slice(0);n.shift();var i=d3.scale.ordinal().range([colorbrewer.schemes[colorbrewer.selectedScheme][colorbrewer.numClasses][1],colorbrewer.schemes[colorbrewer.selectedScheme][colorbrewer.numClasses][2],colorbrewer.schemes[colorbrewer.selectedScheme][colorbrewer.numClasses][3]]),r=d3.scale.ordinal().range(n),t=colorbrewer.schemes[colorbrewer.selectedScheme][colorbrewer.numClasses][2],u=colorbrewer.schemes[colorbrewer.selectedScheme][colorbrewer.numClasses][3];alsglance.charts.timeOfDayChart.ordinalColors(n).redraw();alsglance.charts.timeHourChart.colors(t).redraw();alsglance.charts.quarterChart.colors(r).redraw();alsglance.charts.aucSeriesChart.colors(i).redraw();alsglance.charts.dateRangeChart.colors(t).redraw();alsglance.charts.emgChart!=null&&alsglance.charts.emgChart.updateOptions({colors:[u]})}}};
//# sourceMappingURL=colorbrewer.min.js.map
