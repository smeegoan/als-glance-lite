/*!
 *  dc 2.1.0-dev
 *  http://dc-js.github.io/dc.js/
 *  Copyright 2012 Nick Zhu and other contributors
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
(function(){function t(n,t){"use strict";var i={version:"2.1.0-dev",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null},r;return i.chartRegistry=function(){function t(t){return t||(t=i.constants.DEFAULT_CHART_GROUP),n[t]||(n[t]=[]),t}var n={};return{has:function(t){for(var i in n)if(n[i].indexOf(t)>=0)return!0;return!1},register:function(i,r){r=t(r);n[r].push(i)},deregister:function(i,r){r=t(r);for(var u=0;u<n[r].length;u++)if(n[r][u].anchorName()===i.anchorName()){n[r].splice(u,1);break}},clear:function(t){t?delete n[t]:n={}},list:function(i){return i=t(i),n[i]}}}(),i.registerChart=function(n,t){i.chartRegistry.register(n,t)},i.deregisterChart=function(n,t){i.chartRegistry.deregister(n,t)},i.hasChart=function(n){return i.chartRegistry.has(n)},i.deregisterAllCharts=function(n){i.chartRegistry.clear(n)},i.filterAll=function(n){for(var r=i.chartRegistry.list(n),t=0;t<r.length;++t)r[t].filterAll()},i.refocusAll=function(n){for(var r=i.chartRegistry.list(n),t=0;t<r.length;++t)r[t].focus&&r[t].focus()},i.renderAll=function(n){for(var r=i.chartRegistry.list(n),t=0;t<r.length;++t)r[t].render();i._renderlet!==null&&i._renderlet(n)},i.redrawAll=function(n){for(var r=i.chartRegistry.list(n),t=0;t<r.length;++t)r[t].redraw();i._renderlet!==null&&i._renderlet(n)},i.disableTransitions=!1,i.transition=function(n,t,r){if(t<=0||t===undefined||i.disableTransitions)return n;var u=n.transition().duration(t);return typeof r=="function"&&r(u),u},i.units={},i.units.integers=function(n,t){return Math.abs(t-n)},i.units.ordinal=function(n,t,i){return i},i.units.fp={},i.units.fp.precision=function(n){var t=function(n,r){var u=Math.abs((r-n)/t.resolution);return i.utils.isNegligible(u-Math.floor(u))?Math.floor(u):Math.ceil(u)};return t.resolution=n,t},i.round={},i.round.floor=function(n){return Math.floor(n)},i.round.ceil=function(n){return Math.ceil(n)},i.round.round=function(n){return Math.round(n)},i.override=function(n,t,i){var r=n[t];n["_"+t]=r;n[t]=i},i.renderlet=function(n){return arguments.length?(i._renderlet=n,i):i._renderlet},i.instanceOfChart=function(n){return n instanceof Object&&n.__dcFlag__&&!0},i.errors={},i.errors.Exception=function(n){var t=n||"Unexpected internal error";this.message=t;this.toString=function(){return t}},i.errors.InvalidStateException=function(){i.errors.Exception.apply(this,arguments)},i.dateFormat=n.time.format("%m/%d/%Y"),i.printers={},i.printers.filters=function(n){for(var r="",t=0;t<n.length;++t)t>0&&(r+=", "),r+=i.printers.filter(n[t]);return r},i.printers.filter=function(n){var t="";return typeof n!="undefined"&&n!==null&&(n instanceof Array?n.length>=2?t="["+i.utils.printSingleValue(n[0])+" -> "+i.utils.printSingleValue(n[1])+"]":n.length>=1&&(t=i.utils.printSingleValue(n[0])):t=i.utils.printSingleValue(n)),t},i.pluck=function(n,t){return t?function(i,r){return t.call(i,i[n],r)}:function(t){return t[n]}},i.utils={},i.utils.printSingleValue=function(n){var t=""+n;return n instanceof Date?t=i.dateFormat(n):typeof n=="string"?t=n:i.utils.isFloat(n)?t=i.utils.printSingleValue.fformat(n):i.utils.isInteger(n)&&(t=Math.round(n)),t},i.utils.printSingleValue.fformat=n.format(".2f"),i.utils.add=function(n,t){var i,r;return typeof t=="string"&&(t=t.replace("%","")),n instanceof Date?(typeof t=="string"&&(t=+t),i=new Date,i.setTime(n.getTime()),i.setDate(n.getDate()+t),i):typeof t=="string"?(r=+t/100,n>0?n*(1+r):n*(1-r)):n+t},i.utils.subtract=function(n,t){var i,r;return typeof t=="string"&&(t=t.replace("%","")),n instanceof Date?(typeof t=="string"&&(t=+t),i=new Date,i.setTime(n.getTime()),i.setDate(n.getDate()-t),i):typeof t=="string"?(r=+t/100,n<0?n*(1+r):n*(1-r)):n-t},i.utils.isNumber=function(n){return n===+n},i.utils.isFloat=function(n){return n===+n&&n!==(n|0)},i.utils.isInteger=function(n){return n===+n&&n===(n|0)},i.utils.isNegligible=function(n){return!i.utils.isNumber(n)||n<i.constants.NEGLIGIBLE_NUMBER&&n>-i.constants.NEGLIGIBLE_NUMBER},i.utils.clamp=function(n,t,i){return n<t?t:n>i?i:n},r=0,i.utils.uniqueId=function(){return++r},i.utils.nameToId=function(n){return n.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},i.utils.appendOrSelect=function(n,t,i){i=i||t;var r=n.select(t);return r.empty()&&(r=n.append(i)),r},i.utils.safeNumber=function(n){return i.utils.isNumber(+n)?+n:0},i.logger={},i.logger.enableDebugLog=!1,i.logger.warn=function(n){return console&&(console.warn?console.warn(n):console.log&&console.log(n)),i.logger},i.logger.debug=function(n){return i.logger.enableDebugLog&&console&&(console.debug?console.debug(n):console.log&&console.log(n)),i.logger},i.logger.deprecate=function(n,t){function u(){return r||(i.logger.warn(t),r=!0),n.apply(this,arguments)}var r=!1;return u},i.events={current:null},i.events.trigger=function(n,t){if(!t){n();return}i.events.current=n;setTimeout(function(){n===i.events.current&&n()},t)},i.filters={},i.filters.RangedFilter=function(n,t){var i=[n,t];return i.isFiltered=function(n){return n>=this[0]&&n<this[1]},i},i.filters.TwoDimensionalFilter=function(n){if(n===null)return null;var t=n;return t.isFiltered=function(n){return n.length&&n.length===t.length&&n[0]===t[0]&&n[1]===t[1]},t},i.filters.RangedTwoDimensionalFilter=function(n){if(n===null)return null;var i=n,t;return t=i[0]instanceof Array?[[Math.min(n[0][0],n[1][0]),Math.min(n[0][1],n[1][1])],[Math.max(n[0][0],n[1][0]),Math.max(n[0][1],n[1][1])]]:[[n[0],-Infinity],[n[1],Infinity]],i.isFiltered=function(n){var i,r;if(n instanceof Array){if(n.length!==2)return!1;i=n[0];r=n[1]}else i=n,r=t[0][1];return i>=t[0][0]&&i<t[1][0]&&r>=t[0][1]&&r<t[1][1]},i},i.baseMixin=function(r){function pt(){return s=r.root().append("svg").attr("width",r.width()).attr("height",r.height())}function wt(n){if(!r[n]||!r[n]())throw new i.errors.InvalidStateException("Mandatory attribute chart."+n+" is missing on chart[#"+r.anchorName()+"]");}function bt(){if(r.dimension()&&r.dimension().filter){var n=it(r.dimension(),u);u=n?n:u}}var b,h,c,k;r.__dcFlag__=i.utils.uniqueId();var rt,d,l,f,s,a=200,ut=function(n){var t=n&&n.getBoundingClientRect&&n.getBoundingClientRect().width;return t&&t>a?t:a},ft=ut,v=200,et=function(n){var t=n&&n.getBoundingClientRect&&n.getBoundingClientRect().height;return t&&t>v?t:v},ot=et,st=i.pluck("key"),ht=i.pluck("value"),ct=i.pluck("key"),y=i.pluck("key"),p,g=!1,lt=function(n){return r.keyAccessor()(n)+": "+r.valueAccessor()(n)},at=!0,vt=750,nt=i.printers.filters,w=["dimension","group"],tt=i.constants.DEFAULT_CHART_GROUP,e=n.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet"),o,u=[],it=function(n,t){return n.filter(null),t.length===0?n.filter(null):n.filterFunction(function(n){for(var i,r=0;r<t.length;r++)if((i=t[r],i.isFiltered&&i.isFiltered(n))||i<=n&&i>=n)return!0;return!1}),t},yt=function(n){return n.all()};return r.width=function(t){return arguments.length?(ft=n.functor(t||ut),r):ft(f.node())},r.height=function(t){return arguments.length?(ot=n.functor(t||et),r):ot(f.node())},r.minWidth=function(n){return arguments.length?(a=n,r):a},r.minHeight=function(n){return arguments.length?(v=n,r):v},r.dimension=function(n){return arguments.length?(rt=n,r.expireCache(),r):rt},r.data=function(t){return arguments.length?(yt=n.functor(t),r.expireCache(),r):yt.call(r,d)},r.group=function(n,t){return arguments.length?(d=n,r._groupName=t,r.expireCache(),r):d},r.ordering=function(n){return arguments.length?(y=n,p=t.quicksort.by(y),r.expireCache(),r):y},r._computeOrderedGroups=function(n){var i=n.slice(0);return i.length<=1?i:(p||(p=t.quicksort.by(y)),p(i,0,i.length))},r.filterAll=function(){return r.filter(null)},r.select=function(n){return f.select(n)},r.selectAll=function(n){return f?f.selectAll(n):null},r.anchor=function(t,u){return arguments.length?(i.instanceOfChart(t)?(l=t.anchor(),f=t.root()):(l=t,f=n.select(l),f.classed(i.constants.CHART_CLASS,!0),i.registerChart(r,u)),tt=u,r):l},r.anchorName=function(){var n=r.anchor();return n&&n.id?n.id:n&&n.replace?n.replace("#",""):"dc-chart"+r.chartID()},r.root=function(n){return arguments.length?(f=n,r):f},r.svg=function(n){return arguments.length?(s=n,r):s},r.resetSvg=function(){return r.select("svg").remove(),pt()},r.filterPrinter=function(n){return arguments.length?(nt=n,r):nt},r.turnOnControls=function(){return f&&(r.selectAll(".reset").style("display",null),r.selectAll(".filter").text(nt(r.filters())).style("display",null)),r},r.turnOffControls=function(){return f&&(r.selectAll(".reset").style("display","none"),r.selectAll(".filter").style("display","none").text(r.filter())),r},r.transitionDuration=function(n){return arguments.length?(vt=n,r):vt},r._mandatoryAttributes=function(n){return arguments.length?(w=n,r):w},r.render=function(){e.preRender(r);w&&w.forEach(wt);var n=r._doRender();return o&&o.render(),r._activateRenderlets("postRender"),n},r._activateRenderlets=function(n){r.transitionDuration()>0&&s?s.transition().duration(r.transitionDuration()).each("end",function(){e.renderlet(r);n&&e[n](r)}):(e.renderlet(r),n&&e[n](r))},r.redraw=function(){e.preRedraw(r);var n=r._doRedraw();return o&&o.render(),r._activateRenderlets("postRedraw"),n},r.redrawGroup=function(){i.redrawAll(r.chartGroup())},r.renderGroup=function(){i.renderAll(r.chartGroup())},r._invokeFilteredListener=function(n){n!==undefined&&e.filtered(r,n)},r._invokeZoomedListener=function(){e.zoomed(r)},b=function(n,t){return t===null||typeof t=="undefined"?n.length>0:n.some(function(n){return t<=n&&t>=n})},r.hasFilterHandler=function(n){return arguments.length?(b=n,r):b},r.hasFilter=function(n){return b(u,n)},h=function(n,t){for(var i=0;i<n.length;i++)if(n[i]<=t&&n[i]>=t){n.splice(i,1);break}return n},r.removeFilterHandler=function(n){return arguments.length?(h=n,r):h},c=function(n,t){return n.push(t),n},r.addFilterHandler=function(n){return arguments.length?(c=n,r):c},k=function(){return[]},r.resetFilterHandler=function(n){return arguments.length?(k=n,r):k},r.replaceFilter=function(n){u=[];r.filter(n)},r.filter=function(n){return arguments.length?(n instanceof Array&&n[0]instanceof Array&&!n.isFiltered?n[0].forEach(function(n){r.hasFilter(n)?h(u,n):c(u,n)}):n===null?u=k(u):r.hasFilter(n)?h(u,n):c(u,n),bt(),r._invokeFilteredListener(n),f!==null&&r.hasFilter()?r.turnOnControls():r.turnOffControls(),r):u.length>0?u[0]:null},r.filters=function(){return u},r.highlightSelected=function(t){n.select(t).classed(i.constants.SELECTED_CLASS,!0);n.select(t).classed(i.constants.DESELECTED_CLASS,!1)},r.fadeDeselected=function(t){n.select(t).classed(i.constants.SELECTED_CLASS,!1);n.select(t).classed(i.constants.DESELECTED_CLASS,!0)},r.resetHighlight=function(t){n.select(t).classed(i.constants.SELECTED_CLASS,!1);n.select(t).classed(i.constants.DESELECTED_CLASS,!1)},r.onClick=function(n){var t=r.keyAccessor()(n);i.events.trigger(function(){r.filter(t);r.redrawGroup()})},r.filterHandler=function(n){return arguments.length?(it=n,r):it},r._doRender=function(){return r},r._doRedraw=function(){return r},r.legendables=function(){return[]},r.legendHighlight=function(){},r.legendReset=function(){},r.legendToggle=function(){},r.isLegendableHidden=function(){return!1},r.keyAccessor=function(n){return arguments.length?(st=n,r):st},r.valueAccessor=function(n){return arguments.length?(ht=n,r):ht},r.label=function(n){return arguments.length?(ct=n,g=!0,r):ct},r.renderLabel=function(n){return arguments.length?(g=n,r):g},r.title=function(n){return arguments.length?(lt=n,r):lt},r.renderTitle=function(n){return arguments.length?(at=n,r):at},r.renderlet=i.logger.deprecate(function(n){r.on("renderlet."+i.utils.uniqueId(),n);return r},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),r.chartGroup=function(n){return arguments.length?(tt=n,r):tt},r.expireCache=function(){return r},r.legend=function(n){return arguments.length?(o=n,o.parent(r),r):o},r.chartID=function(){return r.__dcFlag__},r.options=function(n){for(var t in n)typeof r[t]=="function"?r[t].call(r,n[t]):i.logger.debug("Not a valid option setter name: "+t);return r},r.on=function(n,t){e.on(n,t);return r},r},i.marginMixin=function(n){var t={top:10,right:50,bottom:30,left:30};return n.margins=function(i){return arguments.length?(t=i,n):t},n.effectiveWidth=function(){return n.width()-n.margins().left-n.margins().right},n.effectiveHeight=function(){return n.height()-n.margins().top-n.margins().bottom},n},i.colorMixin=function(t){var i=n.scale.category20c(),u=!0,r=function(n){return t.keyAccessor()(n)};return t.colors=function(r){return arguments.length?(i=r instanceof Array?n.scale.quantize().range(r):n.functor(r),t):i},t.ordinalColors=function(i){return t.colors(n.scale.ordinal().range(i))},t.linearColors=function(i){return t.colors(n.scale.linear().range(i).interpolate(n.interpolateHcl))},t.colorAccessor=function(n){return arguments.length?(r=n,u=!1,t):r},t.defaultColorAccessor=function(){return u},t.colorDomain=function(n){return arguments.length?(i.domain(n),t):i.domain()},t.calculateColorDomain=function(){var r=[n.min(t.data(),t.colorAccessor()),n.max(t.data(),t.colorAccessor())];return i.domain(r),t},t.getColor=function(n,t){return i(r.call(this,n,t))},t.colorCalculator=function(n){return arguments.length?(t.getColor=n,t):t.getColor},t},i.coordinateGridMixin=function(t){function kt(){nt=!0;et&&(t.x().domain(ci(t.x().domain(),v)),f&&t.x().domain(ci(t.x().domain(),f.x().domain())));var n=t.x().domain(),r=i.filters.RangedFilter(n[0],n[1]);t.replaceFilter(r);t.rescale();t.redraw();f&&!lt(t.filter(),f.filter())&&i.events.trigger(function(){f.replaceFilter(r);f.redraw()});t._invokeZoomedListener();i.events.trigger(function(){t.redrawGroup()},i.constants.EVENT_DELAY);nt=!lt(n,v)}function ai(n){t.isOrdinal()?(t.elasticX()||r.domain().length===0)&&r.domain(t._ordinalXDomain()):t.elasticX()&&r.domain([t.xAxisMin(),t.xAxisMax()]);var i=r.domain();(!rt||i.some(function(n,t){return n!==rt[t]}))&&t.rescale();rt=i;t.isOrdinal()?r.rangeBands([0,t.xAxisLength()],ct,t._useOuterPadding()?ht:0):r.range([0,t.xAxisLength()]);e=e.scale(t.x());vi(n)}function vi(n){var u=n.selectAll("g."+yt);if(ft){u.empty()&&(u=n.insert("g",":first-child").attr("class",at+" "+yt).attr("transform","translate("+t.margins().left+","+t.margins().top+")"));var o=e.tickValues()?e.tickValues():typeof r.ticks=="function"?r.ticks(e.ticks()[0]):r.domain(),f=u.selectAll("line").data(o),s=f.enter().append("line").attr("x1",function(n){return r(n)}).attr("y1",t._xAxisY()-t.margins().top).attr("x2",function(n){return r(n)}).attr("y2",0).attr("opacity",0);i.transition(s,t.transitionDuration()).attr("opacity",1);i.transition(f,t.transitionDuration()).attr("x1",function(n){return r(n)}).attr("y1",t._xAxisY()-t.margins().top).attr("x2",function(n){return r(n)}).attr("y2",0);f.exit().remove()}else u.selectAll("line").remove()}function fi(){return t._xAxisY()-t.margins().top}function ei(){return t.anchorName().replace(/[ .#]/g,"-")+"-clip"}function oi(){var u=i.utils.appendOrSelect(b,"defs"),n=ei(),f=i.utils.appendOrSelect(u,"#"+n,"clipPath").attr("id",n),r=w*2;i.utils.appendOrSelect(f,"rect").attr("width",t.xAxisLength()+r).attr("height",t.yAxisHeight()+r).attr("transform","translate(-"+w+", -"+w+")")}function si(n){t.isOrdinal()&&(y=!1);ai(t.g());t._prepareYAxis(t.g());t.plotData();(t.elasticX()||nt||n)&&t.renderXAxis(t.g());(t.elasticY()||n)&&t.renderYAxis(t.g());n?t.renderBrush(t.g()):t.redrawBrush(t.g())}function hi(){st?t._enableMouseZoom():ui&&t._disableMouseZoom()}function ci(t,i){var r=[];return r[0]=n.max([t[0],i[0]]),r[1]=n.min([t[1],i[1]]),r}function lt(n,t){if(n||t)if(n&&t){if(n.length===0&&t.length===0||n[0].valueOf()===t[0].valueOf()&&n[1].valueOf()===t[1].valueOf())return!0}else return!1;else return!0;return!1}function yi(n){return n instanceof Array&&n.length>1}var at="grid-line",vt="horizontal",yt="vertical",pt="y-axis-label",wt="x-axis-label",bt=12;t=i.colorMixin(i.marginMixin(i.baseMixin(t)));t.colors(n.scale.category10());t._mandatoryAttributes().push("x");var b,s,it,r,v,e=n.svg.axis().orient("bottom"),dt=i.units.integers,k=0,gt=!1,ni,d=0,rt,o,h=n.svg.axis().orient("left"),g=0,ti=!1,ii,c=0,u=n.svg.brush(),y=!0,ri,ut=!1,ft=!1,nt=!1,p,tt=[1,Infinity],et=!0,ot=n.behavior.zoom().on("zoom",kt),li=n.behavior.zoom().on("zoom",null),ui=!1,f,l,st=!1,w=0,ht=.5,ct=0,a=!1;return t.rescale=function(){p=undefined},t.rangeChart=function(n){return arguments.length?(f=n,f.focusChart(t),t):f},t.zoomScale=function(n){return arguments.length?(tt=n,t):tt},t.zoomOutRestrict=function(n){return arguments.length?(tt[0]=n?1:0,et=n,t):et},t._generateG=function(n){return b=n===undefined?t.svg():n,s=b.append("g"),it=s.append("g").attr("class","chart-body").attr("transform","translate("+t.margins().left+", "+t.margins().top+")").attr("clip-path","url(#"+ei()+")"),s},t.g=function(n){return arguments.length?(s=n,t):s},t.mouseZoomable=function(n){return arguments.length?(st=n,t):st},t.chartBodyG=function(n){return arguments.length?(it=n,t):it},t.x=function(n){return arguments.length?(r=n,v=r.domain(),t):r},t.xOriginalDomain=function(){return v},t.xUnits=function(n){return arguments.length?(dt=n,t):dt},t.xAxis=function(n){return arguments.length?(e=n,t):e},t.elasticX=function(n){return arguments.length?(gt=n,t):gt},t.xAxisPadding=function(n){return arguments.length?(k=n,t):k},t.xUnitCount=function(){if(p===undefined){var n=t.xUnits()(t.x().domain()[0],t.x().domain()[1],t.x().domain());p=n instanceof Array?n.length:n}return p},t.useRightYAxis=function(n){return arguments.length?(a=n,t):a},t.isOrdinal=function(){return t.xUnits()===i.units.ordinal},t._useOuterPadding=function(){return!0},t._ordinalXDomain=function(){var n=t._computeOrderedGroups(t.data());return n.map(t.keyAccessor())},t.renderXAxis=function(n){var u=n.selectAll("g.x"),r;u.empty()&&(u=n.append("g").attr("class","axis x").attr("transform","translate("+t.margins().left+","+t._xAxisY()+")"));r=n.selectAll("text."+wt);r.empty()&&t.xAxisLabel()&&(r=n.append("text").attr("transform","translate("+(t.margins().left+t.xAxisLength()/2)+","+(t.height()-d)+")").attr("class",wt).attr("text-anchor","middle").text(t.xAxisLabel()));t.xAxisLabel()&&r.text()!==t.xAxisLabel()&&r.text(t.xAxisLabel());i.transition(u,t.transitionDuration()).call(e)},t._xAxisY=function(){return t.height()-t.margins().bottom},t.xAxisLength=function(){return t.effectiveWidth()},t.xAxisLabel=function(n,i){return arguments.length?(ni=n,t.margins().bottom-=d,d=i===undefined?bt:i,t.margins().bottom+=d,t):ni},t._prepareYAxis=function(i){if(o===undefined||t.elasticY()){o=n.scale.linear();var r=t.yAxisMin()||0,u=t.yAxisMax()||0;o.domain([r,u]).rangeRound([t.yAxisHeight(),0])}o.range([t.yAxisHeight(),0]);h=h.scale(o);a&&h.orient("right");t._renderHorizontalGridLinesForAxis(i,o,h)},t.renderYAxisLabel=function(n,i,r,u){var f,e;u=u||c;f=t.g().selectAll("text."+pt+"."+n+"-label");f.empty()&&i&&(e=t.margins().top+t.yAxisHeight()/2,f=t.g().append("text").attr("transform","translate("+u+","+e+"),rotate("+r+")").attr("class",pt+" "+n+"-label").attr("text-anchor","middle").text(i));i&&f.text()!==i&&f.text(i)},t.renderYAxisAt=function(n,r,u){var f=t.g().selectAll("g."+n);f.empty()&&(f=t.g().append("g").attr("class","axis "+n).attr("transform","translate("+u+","+t.margins().top+")"));i.transition(f,t.transitionDuration()).call(r)},t.renderYAxis=function(){var r=a?t.width()-t.margins().right:t._yAxisX(),n,i;t.renderYAxisAt("y",h,r);n=a?t.width()-c:c;i=a?90:-90;t.renderYAxisLabel("y",t.yAxisLabel(),i,n)},t._renderHorizontalGridLinesForAxis=function(n,r,u){var f=n.selectAll("g."+vt),o,e,s;ut?(o=u.tickValues()?u.tickValues():r.ticks(u.ticks()[0]),f.empty()&&(f=n.insert("g",":first-child").attr("class",at+" "+vt).attr("transform","translate("+t.margins().left+","+t.margins().top+")")),e=f.selectAll("line").data(o),s=e.enter().append("line").attr("x1",1).attr("y1",function(n){return r(n)}).attr("x2",t.xAxisLength()).attr("y2",function(n){return r(n)}).attr("opacity",0),i.transition(s,t.transitionDuration()).attr("opacity",1),i.transition(e,t.transitionDuration()).attr("x1",1).attr("y1",function(n){return r(n)}).attr("x2",t.xAxisLength()).attr("y2",function(n){return r(n)}),e.exit().remove()):f.selectAll("line").remove()},t._yAxisX=function(){return t.useRightYAxis()?t.width()-t.margins().right:t.margins().left},t.yAxisLabel=function(n,i){return arguments.length?(ii=n,t.margins().left-=c,c=i===undefined?bt:i,t.margins().left+=c,t):ii},t.y=function(n){return arguments.length?(o=n,t):o},t.yAxis=function(n){return arguments.length?(h=n,t):h},t.elasticY=function(n){return arguments.length?(ti=n,t):ti},t.renderHorizontalGridLines=function(n){return arguments.length?(ut=n,t):ut},t.renderVerticalGridLines=function(n){return arguments.length?(ft=n,t):ft},t.xAxisMin=function(){var r=n.min(t.data(),function(n){return t.keyAccessor()(n)});return i.utils.subtract(r,k)},t.xAxisMax=function(){var r=n.max(t.data(),function(n){return t.keyAccessor()(n)});return i.utils.add(r,k)},t.yAxisMin=function(){var r=n.min(t.data(),function(n){return t.valueAccessor()(n)});return i.utils.subtract(r,g)},t.yAxisMax=function(){var r=n.max(t.data(),function(n){return t.valueAccessor()(n)});return i.utils.add(r,g)},t.yAxisPadding=function(n){return arguments.length?(g=n,t):g},t.yAxisHeight=function(){return t.effectiveHeight()},t.round=function(n){return arguments.length?(ri=n,t):ri},t._rangeBandPadding=function(n){return arguments.length?(ct=n,t):ct},t._outerRangeBandPadding=function(n){return arguments.length?(ht=n,t):ht},i.override(t,"filter",function(n){return arguments.length?(t._filter(n),n?t.brush().extent(n):t.brush().clear(),t):t._filter()}),t.brush=function(n){return arguments.length?(u=n,t):u},t.renderBrush=function(n){if(y){u.on("brush",t._brushing);u.on("brushstart",t._disableMouseZoom);u.on("brushend",hi);var i=n.append("g").attr("class","brush").attr("transform","translate("+t.margins().left+","+t.margins().top+")").call(u.x(t.x()));t.setBrushY(i);t.setHandlePaths(i);t.hasFilter()&&t.redrawBrush(n)}},t.setHandlePaths=function(n){n.selectAll(".resize").append("path").attr("d",t.resizeHandlePath)},t.setBrushY=function(n){n.selectAll("rect").attr("height",fi())},t.extendBrush=function(){var n=u.extent();return t.round()&&(n[0]=n.map(t.round())[0],n[1]=n.map(t.round())[1],s.select(".brush").call(u.extent(n))),n},t.brushIsEmpty=function(n){return u.empty()||!n||n[1]<=n[0]},t._brushing=function(){var n=t.extendBrush(),r;t.redrawBrush(s);t.brushIsEmpty(n)?i.events.trigger(function(){t.filter(null);t.redrawGroup()},i.constants.EVENT_DELAY):(r=i.filters.RangedFilter(n[0],n[1]),i.events.trigger(function(){t.replaceFilter(r);t.redrawGroup()},i.constants.EVENT_DELAY))},t.redrawBrush=function(n){if(y){t.filter()&&t.brush().empty()&&t.brush().extent(t.filter());var i=n.select("g.brush");i.call(t.brush().x(t.x()));t.setBrushY(i)}t.fadeDeselectedArea()},t.fadeDeselectedArea=function(){},t.resizeHandlePath=function(n){var r=+(n==="e"),i=r?1:-1,t=fi()/3;return"M"+.5*i+","+t+"A6,6 0 0 "+r+" "+6.5*i+","+(t+6)+"V"+(2*t-6)+"A6,6 0 0 "+r+" "+.5*i+","+2*t+"ZM"+2.5*i+","+(t+8)+"V"+(2*t-8)+"M"+4.5*i+","+(t+8)+"V"+(2*t-8)},t.clipPadding=function(n){return arguments.length?(w=n,t):w},t._preprocessData=function(){},t._doRender=function(){return t.resetSvg(),t._preprocessData(),t._generateG(),oi(),si(!0),hi(),t},t._doRedraw=function(){return t._preprocessData(),si(!1),oi(),t},t._enableMouseZoom=function(){ui=!0;ot.x(t.x()).scaleExtent(tt).size([t.width(),t.height()]).duration(t.transitionDuration());t.root().call(ot)},t._disableMouseZoom=function(){t.root().call(li)},t.focus=function(n){yi(n)?t.x().domain(n):t.x().domain(v);ot.x(t.x());kt()},t.refocused=function(){return nt},t.focusChart=function(n){if(!arguments.length)return l;l=n;t.on("filtered",function(n){n.filter()?lt(n.filter(),l.filter())||i.events.trigger(function(){l.focus(n.filter())}):i.events.trigger(function(){l.x().domain(l.xOriginalDomain())})});return t},t.brushOn=function(n){return arguments.length?(y=n,t):y},t},i.stackMixin=function(t){function h(n,i){var r=n.accessor||t.valueAccessor();return n.name=String(n.name||i),n.values=n.group.all().map(function(i,u){return{x:t.keyAccessor()(i,u),y:n.hidden?null:r(i,u),data:i,layer:n.name,hidden:n.hidden}}),n.values=n.values.filter(c()),n.values}function c(){if(!t.x())return n.functor(!0);var i=t.x().domain();return t.isOrdinal()?function(){return!0}:t.elasticX()?function(){return!0}:function(n){return n.x>=i[0]&&n.x<=i[i.length-1]}}function o(n){var t=r.map(i.pluck("name")).indexOf(n);return r[t]}function u(){var n=t.data().map(function(n){return n.values}),i=Array.prototype.concat.apply([],n);return t._computeOrderedGroups(i)}function l(n){return!n.hidden}var s=n.layout.stack().values(h),r=[],f={},e=!1;return t.stack=function(n,i,u){if(!arguments.length)return r;arguments.length<=2&&(u=i);var f={group:n};return typeof i=="string"&&(f.name=i),typeof u=="function"&&(f.accessor=u),r.push(f),t},i.override(t,"group",function(n,i,u){return arguments.length?(r=[],f={},t.stack(n,i),u&&t.valueAccessor(u),t._group(n,i)):t._group()}),t.hidableStacks=function(n){return arguments.length?(e=n,t):e},t.hideStack=function(n){var i=o(n);return i&&(i.hidden=!0),t},t.showStack=function(n){var i=o(n);return i&&(i.hidden=!1),t},t.getValueAccessorByIndex=function(n){return r[n].accessor||t.valueAccessor()},t.yAxisMin=function(){var r=n.min(u(),function(n){return n.y+n.y0<n.y0?n.y+n.y0:n.y0});return i.utils.subtract(r,t.yAxisPadding())},t.yAxisMax=function(){var r=n.max(u(),function(n){return n.y+n.y0});return i.utils.add(r,t.yAxisPadding())},t.xAxisMin=function(){var r=n.min(u(),i.pluck("x"));return i.utils.subtract(r,t.xAxisPadding())},t.xAxisMax=function(){var r=n.max(u(),i.pluck("x"));return i.utils.add(r,t.xAxisPadding())},i.override(t,"title",function(n,i){return n?typeof n=="function"?t._title(n):n===t._groupName&&typeof i=="function"?t._title(i):typeof i!="function"?f[n]||t._title():(f[n]=i,t):t._title()}),t.stackLayout=function(n){return arguments.length?(s=n,t):s},t.data(function(){var n=r.filter(l);return n.length?t.stackLayout()(n):[]}),t._ordinalXDomain=function(){return u().map(i.pluck("x"))},t.colorAccessor(function(n){return this.layer||this.name||n.name||n.layer}),t.legendables=function(){return r.map(function(n,i){return{chart:t,name:n.name,hidden:n.hidden||!1,color:t.getColor.call(n,n.values,i)}})},t.isLegendableHidden=function(n){var t=o(n.name);return t?t.hidden:!1},t.legendToggle=function(n){e&&(t.isLegendableHidden(n)?t.showStack(n.name):t.hideStack(n.name),t.renderGroup())},t},i.capMixin=function(t){var r=Infinity,f="Others",u=function(i){var r=n.sum(i,t.valueAccessor()),u=t.group().all(),e=n.sum(u,t.valueAccessor()),o=i.map(t.keyAccessor()),s=u.map(t.keyAccessor()),h=n.set(o),c=s.filter(function(n){return!h.has(n)});return e>r?i.concat([{others:c,key:f,value:e-r}]):i};return t.cappedKeyAccessor=function(n,i){return n.others?n.key:t.keyAccessor()(n,i)},t.cappedValueAccessor=function(n,i){return n.others?n.value:t.valueAccessor()(n,i)},t.data(function(n){if(r===Infinity)return t._computeOrderedGroups(n.all());var i=n.top(r);return(i=t._computeOrderedGroups(i),u)?u(i):i}),t.cap=function(n){return arguments.length?(r=n,t):r},t.othersLabel=function(n){return arguments.length?(f=n,t):f},t.othersGrouper=function(n){return arguments.length?(u=n,t):u},i.override(t,"onClick",function(n){n.others&&t.filter([n.others]);t._onClick(n)}),t},i.bubbleMixin=function(t){var h=.3,r=10,u,f,e,o,s;return t.BUBBLE_NODE_CLASS="node",t.BUBBLE_CLASS="bubble",t.MIN_RADIUS=10,t=i.colorMixin(t),t.renderLabel(!0),t.data(function(n){return n.top(Infinity)}),u=n.scale.linear().domain([0,100]),f=function(n){return n.r},t.r=function(n){return arguments.length?(u=n,t):u},t.radiusValueAccessor=function(n){return arguments.length?(f=n,t):f},t.rMin=function(){return n.min(t.data(),function(n){return t.radiusValueAccessor()(n)})},t.rMax=function(){return n.max(t.data(),function(n){return t.radiusValueAccessor()(n)})},t.bubbleR=function(n){var r=t.radiusValueAccessor()(n),i=t.r()(r);return(isNaN(i)||r<=0)&&(i=0),i},e=function(n){return t.label()(n)},o=function(n){return t.bubbleR(n)>r?1:0},t._doRenderLabel=function(n){if(t.renderLabel()){var r=n.select("text");r.empty()&&(r=n.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",t.onClick));r.attr("opacity",0).text(e);i.transition(r,t.transitionDuration()).attr("opacity",o)}},t.doUpdateLabels=function(n){if(t.renderLabel()){var r=n.selectAll("text").text(e);i.transition(r,t.transitionDuration()).attr("opacity",o)}},s=function(n){return t.title()(n)},t._doRenderTitles=function(n){if(t.renderTitle()){var i=n.select("title");i.empty()&&n.append("title").text(s)}},t.doUpdateTitles=function(n){t.renderTitle()&&n.selectAll("title").text(s)},t.minRadiusWithLabel=function(n){return arguments.length?(r=n,t):r},t.maxBubbleRelativeSize=function(n){return arguments.length?(h=n,t):h},t.fadeDeselectedArea=function(){t.hasFilter()?t.selectAll("g."+t.BUBBLE_NODE_CLASS).each(function(n){t.isSelectedNode(n)?t.highlightSelected(this):t.fadeDeselected(this)}):t.selectAll("g."+t.BUBBLE_NODE_CLASS).each(function(){t.resetHighlight(this)})},t.isSelectedNode=function(n){return t.hasFilter(n.key)},t.onClick=function(n){var r=n.key;i.events.trigger(function(){t.filter(r);t.redrawGroup()})},t},i.pieChart=function(t,r){function w(){var i,r,t,s;o=o?o:n.min([u.width(),u.height()])/2;i=k();r=yt();n.sum(u.data(),u.valueAccessor())?(t=r(u.data()),f.classed(l,!1)):(t=r([{key:h,value:1,others:[h]}]),f.classed(l,!0));f&&(s=f.selectAll("g."+e).data(t),rt(s,i,t),st(t,i),at(s),vt())}function rt(n,t,i){var r=ut(n);ft(r,t);et(r);ot(i,t)}function ut(n){return n.enter().append("g").attr("class",function(n,t){return e+" _"+t})}function ft(n,t){var r=n.append("path").attr("fill",nt).on("click",tt).attr("d",function(n,i){return v(n,i,t)});i.transition(r,u.transitionDuration(),function(n){n.attrTween("d",g)})}function et(n){u.renderTitle()&&n.append("title").text(function(n){return u.title()(n.data)})}function b(n,t){i.transition(n,u.transitionDuration()).attr("transform",function(n){return kt(n,t)}).attr("text-anchor","middle").text(function(n){var t=n.data;return(wt(t)||pt(n))&&!d(n)?"":u.label()(n.data)})}function ot(n,t){var i,r;u.renderLabel()&&(i=f.selectAll("text."+e).data(n),i.exit().remove(),r=i.enter().append("text").attr("class",function(n,t){var i=e+" _"+t;return s&&(i+=" external"),i}).on("click",tt),b(r,t))}function st(n,t){ht(n,t);ct(n,t);lt(n)}function ht(n,t){var r=f.selectAll("g."+e).data(n).select("path").attr("d",function(n,i){return v(n,i,t)});i.transition(r,u.transitionDuration(),function(n){n.attrTween("d",g)}).attr("fill",nt)}function ct(n,t){if(u.renderLabel()){var i=f.selectAll("text."+e).data(n);b(i,t)}}function lt(n){u.renderTitle()&&f.selectAll("g."+e).data(n).select("title").text(function(n){return u.title()(n.data)})}function at(n){n.exit().remove()}function vt(){u.hasFilter()?u.selectAll("g."+e).each(function(n){d(n)?u.highlightSelected(this):u.fadeDeselected(this)}):u.selectAll("g."+e).each(function(){u.resetHighlight(this)})}function k(){return n.svg.arc().outerRadius(o).innerRadius(c)}function d(n){return u.hasFilter(u.cappedKeyAccessor(n.data))}function yt(){return n.layout.pie().sort(null).value(u.cappedValueAccessor)}function pt(n){var t=n.endAngle-n.startAngle;return isNaN(t)||t<a}function wt(n){return u.cappedValueAccessor(n)===0}function g(t){var i,r;return t.innerRadius=c,i=this._current,bt(i)&&(i={startAngle:0,endAngle:0}),r=n.interpolate(i,t),this._current=r(0),function(n){return v(r(n),0,k())}}function bt(n){return!n||isNaN(n.startAngle)||isNaN(n.endAngle)}function nt(n,t){return u.getColor(n.data,t)}function tt(n,t){if(f.attr("class")!==l)u.onClick(n.data,t)}function v(n,t,i){var r=i(n,t);return r.indexOf("NaN")>=0&&(r="M0,0"),r}function kt(t,i){var r;return r=s?n.svg.arc().outerRadius(o+s).innerRadius(o+s).centroid(t):i.centroid(t),isNaN(r[0])||isNaN(r[1])?"translate(0,0)":"translate("+r+")"}function it(t,i){u.selectAll("g.pie-slice").each(function(r){t.name===r.data.key&&n.select(this).classed("highlight",i)})}var e="pie-slice",l="empty-chart",h="empty",o,c=0,f,y,p,a=.5,s,u=i.capMixin(i.colorMixin(i.baseMixin({})));return u.colorAccessor(u.cappedKeyAccessor),u.title(function(n){return u.cappedKeyAccessor(n)+": "+u.cappedValueAccessor(n)}),u.slicesCap=u.cap,u.label(u.cappedKeyAccessor),u.renderLabel(!0),u.transitionDuration(350),u._doRender=function(){return u.resetSvg(),f=u.svg().append("g").attr("transform","translate("+u.cx()+","+u.cy()+")"),w(),u},u.innerRadius=function(n){return arguments.length?(c=n,u):c},u.radius=function(n){return arguments.length?(o=n,u):o},u.cx=function(n){return arguments.length?(y=n,u):y||u.width()/2},u.cy=function(n){return arguments.length?(p=n,u):p||u.height()/2},u._doRedraw=function(){return w(),u},u.minAngleForLabel=function(n){return arguments.length?(a=n,u):a},u.emptyTitle=function(n){return arguments.length===0?h:(h=n,u)},u.externalLabels=function(n){return arguments.length===0?s:(s=n?n:undefined,u)},u.legendables=function(){return u.data().map(function(n,t){var i={name:n.key,data:n.value,others:n.others,chart:u};return i.color=u.getColor(n,t),i})},u.legendHighlight=function(n){it(n,!0)},u.legendReset=function(n){it(n,!1)},u.legendToggle=function(n){u.onClick({key:n.name,others:n.others})},u.anchor(t,r)},i.barChart=function(t,r){function c(n){return i.utils.safeNumber(Math.abs(u.y()(n.y+n.y0)-u.y()(n.y0)))}function a(n,t,r){var s=n.selectAll("rect.bar").data(r.values,i.pluck("x")),h=s.enter().append("rect").attr("class","bar").attr("fill",i.pluck("data",u.getColor)).attr("y",u.yAxisHeight()).attr("height",0);if(u.renderTitle()&&h.append("title").text(i.pluck("data",u.title(r.name))),u.isOrdinal())s.on("click",u.onClick);i.transition(s,u.transitionDuration()).attr("x",function(n){var t=u.x()(n.x);return o&&(t-=f/2),u.isOrdinal()&&e!==undefined&&(t+=e/2),i.utils.safeNumber(t)}).attr("y",function(n){var t=u.y()(n.y+n.y0);return n.y<0&&(t-=c(n)),i.utils.safeNumber(t)}).attr("width",f).attr("height",function(n){return c(n)}).attr("fill",i.pluck("data",u.getColor)).select("title").text(i.pluck("data",u.title(r.name)));i.transition(s.exit(),u.transitionDuration()).attr("height",0).remove()}function v(){if(f===undefined){var n=u.xUnitCount();f=u.isOrdinal()&&e===undefined?Math.floor(u.x().rangeBand()):e?Math.floor((u.xAxisLength()-(n-1)*e)/n):Math.floor(u.xAxisLength()/(1+u.barPadding())/n);(f===Infinity||isNaN(f)||f<h)&&(f=h)}}function l(t,i){return function(){var u=n.select(this),r=u.attr("fill")===t;return i?!r:r}}var h=1,u=i.stackMixin(i.coordinateGridMixin({})),e=2,o=!1,s=!1,f;return i.override(u,"rescale",function(){u._rescale();f=undefined}),i.override(u,"render",function(){u.round()&&o&&!s&&i.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details.");u._render()}),u.plotData=function(){var t=u.chartBodyG().selectAll("g.stack").data(u.data());v();t.enter().append("g").attr("class",function(n,t){return"stack _"+t});t.each(function(t,i){var r=n.select(this);a(r,i,t)})},u.fadeDeselectedArea=function(){var n=u.chartBodyG().selectAll("rect.bar"),t=u.brush().extent(),r,f;u.isOrdinal()?u.hasFilter()?(n.classed(i.constants.SELECTED_CLASS,function(n){return u.hasFilter(n.x)}),n.classed(i.constants.DESELECTED_CLASS,function(n){return!u.hasFilter(n.x)})):(n.classed(i.constants.SELECTED_CLASS,!1),n.classed(i.constants.DESELECTED_CLASS,!1)):u.brushIsEmpty(t)?n.classed(i.constants.DESELECTED_CLASS,!1):(r=t[0],f=t[1],n.classed(i.constants.DESELECTED_CLASS,function(n){return n.x<r||n.x>=f}))},u.centerBar=function(n){return arguments.length?(o=n,u):o},i.override(u,"onClick",function(n){u._onClick(n.data)}),u.barPadding=function(n){return arguments.length?(u._rangeBandPadding(n),e=undefined,u):u._rangeBandPadding()},u._useOuterPadding=function(){return e===undefined},u.outerPadding=u._outerRangeBandPadding,u.gap=function(n){return arguments.length?(e=n,u):e},u.extendBrush=function(){var n=u.brush().extent();return u.round()&&(!o||s)&&(n[0]=n.map(u.round())[0],n[1]=n.map(u.round())[1],u.chartBodyG().select(".brush").call(u.brush().extent(n))),n},u.alwaysUseRounding=function(n){return arguments.length?(s=n,u):s},u.legendHighlight=function(n){u.isLegendableHidden(n)||u.g().selectAll("rect.bar").classed("highlight",l(n.color)).classed("fadeout",l(n.color,!0))},u.legendReset=function(){u.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},i.override(u,"xAxisMax",function(){var n=this._xAxisMax(),t;return"resolution"in u.xUnits()&&(t=u.xUnits().resolution,n+=t),n}),u.anchor(t,r)},i.lineChart=function(t,r){function w(n,t){return u.getColor.call(n,n.values,t)}function rt(t,r){var o=n.svg.line().x(function(n){return u.x()(n.x)}).y(function(n){return u.y()(n.y+n.y0)}).interpolate(y).tension(p),s;f&&o.defined(f);s=t.append("path").attr("class","line").attr("stroke",w);e&&s.attr("stroke-dasharray",e);i.transition(r.select("path.line"),u.transitionDuration()).attr("stroke",w).attr("d",function(n){return d(o(n.values))})}function ut(t,r){if(k){var e=n.svg.area().x(function(n){return u.x()(n.x)}).y(function(n){return u.y()(n.y+n.y0)}).y0(function(n){return u.y()(n.y0)}).interpolate(y).tension(p);f&&e.defined(f);t.append("path").attr("class","area").attr("fill",w).attr("d",function(n){return d(e(n.values))});i.transition(r.select("path.area"),u.transitionDuration()).attr("fill",w).attr("d",function(n){return d(e(n.values))})}}function d(n){return!n||n.indexOf("NaN")>=0?"M0,0":n}function ft(t,r){if(!u.brushOn()&&u.xyTipsOn()){var o=b+"-list",e=t.select("g."+o);e.empty()&&(e=t.append("g").attr("class",o));r.each(function(t,r){var l=t.values,o,s;f&&(l=l.filter(f));o=e.select("g."+b+"._"+r);o.empty()&&(o=e.append("g").attr("class",b+" _"+r));et(o);s=o.selectAll("circle."+g).data(l,i.pluck("x"));s.enter().append("circle").attr("class",g).attr("r",tt()).style("fill-opacity",h).style("stroke-opacity",c).on("mousemove",function(){var t=n.select(this);ot(t);st(t,o)}).on("mouseout",function(){var t=n.select(this);ht(t);ct(o)});s.attr("cx",function(n){return i.utils.safeNumber(u.x()(n.x))}).attr("cy",function(n){return i.utils.safeNumber(u.y()(n.y+n.y0))}).attr("fill",u.getColor).call(lt,t);s.exit().remove()})}}function et(n){var i=n.select("path."+o).empty()?n.append("path").attr("class",o):n.select("path."+o),t;i.style("display","none").attr("stroke-dasharray","5,5");t=n.select("path."+s).empty()?n.append("path").attr("class",s):n.select("path."+s);t.style("display","none").attr("stroke-dasharray","5,5")}function ot(n){return n.style("fill-opacity",.8),n.style("stroke-opacity",.8),n.attr("r",a),n}function st(n,t){var i=n.attr("cx"),r=n.attr("cy"),f=u._yAxisX()-u.margins().left,e="M"+f+" "+r+"L"+i+" "+r,h="M"+i+" "+u.yAxisHeight()+"L"+i+" "+r;t.select("path."+o).style("display","").attr("d",e);t.select("path."+s).style("display","").attr("d",h)}function tt(){return v||a}function ht(n){n.style("fill-opacity",h).style("stroke-opacity",c).attr("r",tt())}function ct(n){n.select("path."+o).style("display","none");n.select("path."+s).style("display","none")}function lt(n,t){u.renderTitle()&&(n.selectAll("title").remove(),n.append("title").text(i.pluck("data",u.title(t.name))))}function it(t,i,r){return function(){var u=n.select(this),f=u.attr("stroke")===t&&u.attr("stroke-dasharray")===(i instanceof Array?i.join(","):null)||u.attr("fill")===t;return r?!f:f}}var b="dc-tooltip",g="dot",o="yRef",s="xRef",l=1e-6,u=i.stackMixin(i.coordinateGridMixin({})),k=!1,a=5,v=null,h=l,c=l,y="linear",p=.7,f,e,nt=!0;return u.transitionDuration(500),u._rangeBandPadding(1),u.plotData=function(){var t=u.chartBodyG(),i=t.selectAll("g.stack-list"),n,r;i.empty()&&(i=t.append("g").attr("class","stack-list"));n=i.selectAll("g.stack").data(u.data());r=n.enter().append("g").attr("class",function(n,t){return"stack _"+t});rt(r,n);ut(r,n);ft(t,n)},u.interpolate=function(n){return arguments.length?(y=n,u):y},u.tension=function(n){return arguments.length?(p=n,u):p},u.defined=function(n){return arguments.length?(f=n,u):f},u.dashStyle=function(n){return arguments.length?(e=n,u):e},u.renderArea=function(n){return arguments.length?(k=n,u):k},u.xyTipsOn=function(n){return arguments.length?(nt=n,u):nt},u.dotRadius=function(n){return arguments.length?(a=n,u):a},u.renderDataPoints=function(n){if(arguments.length)n?(h=n.fillOpacity||.8,c=n.strokeOpacity||.8,v=n.radius||2):(h=l,c=l,v=null);else return{fillOpacity:h,strokeOpacity:c,radius:v};return u},u.legendHighlight=function(n){u.isLegendableHidden(n)||u.g().selectAll("path.line, path.area").classed("highlight",it(n.color,n.dashstyle)).classed("fadeout",it(n.color,n.dashstyle,!0))},u.legendReset=function(){u.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},i.override(u,"legendables",function(){var n=u._legendables();return e?n.map(function(n){return n.dashstyle=e,n}):n}),u.anchor(t,r)},i.dataCount=function(t,r){var e=n.format(",d"),u=i.baseMixin({}),f={some:"",all:""};return u.html=function(n){return arguments.length?(n.all&&(f.all=n.all),n.some&&(f.some=n.some),u):f},u.formatNumber=function(n){return arguments.length?(e=n,u):e},u._doRender=function(){var i=u.dimension().size(),r=u.group().value(),n=e(i),t=e(r);return i===r&&f.all!==""?u.root().html(f.all.replace("%total-count",n).replace("%filter-count",t)):f.some!==""?u.root().html(f.some.replace("%total-count",n).replace("%filter-count",t)):(u.selectAll(".total-count").text(n),u.selectAll(".filter-count").text(t)),u},u._doRedraw=function(){return u._doRender()},u.anchor(t,r)},i.dataTable=function(t,r){function y(){var n=!0,r,e,t,i;return f.forEach(function(t){n=n&typeof t=="function"}),n||(u.selectAll("th").remove(),r=u.root().selectAll("th").data(f),e=r.enter().append("th"),e.attr("class",v).html(function(n){return u._doColumnHeaderFormat(n)})),t=u.root().selectAll("tbody").data(p(),function(n){return u.keyAccessor()(n)}),i=t.enter().append("tbody"),i.append("tr").attr("class",a).append("td").attr("class",c).attr("colspan",f.length).html(function(n){return u.keyAccessor()(n)}),t.exit().remove(),i}function p(){var t;return t=e===n.ascending?u.dimension().bottom(o):u.dimension().top(o),n.nest().key(u.group()).sortKeys(e).entries(t.sort(function(n,t){return e(s(n),s(t))}))}function w(n){var t=n.order().selectAll("tr."+h).data(function(n){return n.values}),i=t.enter().append("tr").attr("class",h);return f.forEach(function(n,t){i.append("td").attr("class",l+" _"+t).html(function(t){return u._doColumnValueFormat(n,t)})}),t.exit().remove(),t}var c="dc-table-label",h="dc-table-row",l="dc-table-column",a="dc-table-group",v="dc-table-head",u=i.baseMixin({}),o=25,f=[],s=function(n){return n},e=n.ascending;return u._doRender=function(){return u.selectAll("tbody").remove(),w(y()),u},u._doColumnValueFormat=function(n,t){return typeof n=="function"?n(t):typeof n=="string"?t[n]:n.format(t)},u._doColumnHeaderFormat=function(n){return typeof n=="function"?u._doColumnHeaderFnToString(n):typeof n=="string"?u._doColumnHeaderCapitalize(n):String(n.label)},u._doColumnHeaderCapitalize=function(n){return n.charAt(0).toUpperCase()+n.slice(1)},u._doColumnHeaderFnToString=function(n){var t=String(n),r=t.indexOf("return "),i,u;return r>=0&&(i=t.lastIndexOf(";"),i>=0&&(t=t.substring(r+7,i),u=t.indexOf("numberFormat"),u>=0&&(t=t.replace("numberFormat","")))),t},u._doRedraw=function(){return u._doRender()},u.size=function(n){return arguments.length?(o=n,u):o},u.columns=function(n){return arguments.length?(f=n,u):f},u.sortBy=function(n){return arguments.length?(s=n,u):s},u.order=function(n){return arguments.length?(e=n,u):e},u.anchor(t,r)},i.dataGrid=function(t,r){function y(){var n=u.root().selectAll("div."+s).data(p(),function(n){return u.keyAccessor()(n)}),t=n.enter().append("div").attr("class",s);return o&&t.html(function(n){return o(n)}),n.exit().remove(),t}function p(){var t=u.dimension().top(h);return n.nest().key(u.group()).sortKeys(e).entries(t.sort(function(n,t){return e(f(n),f(t))}))}function w(n){var t=n.order().selectAll("div."+l).data(function(n){return n.values});return t.enter().append("div").attr("class",l).html(function(n){return c(n)}),t.exit().remove(),t}var a="dc-grid-label",l="dc-grid-item",v="dc-grid-group",s="dc-grid-top",u=i.baseMixin({}),h=999,c=function(n){return"you need to provide an html() handling param:  "+JSON.stringify(n)},f=function(n){return n},e=n.ascending,o=function(n){return"<div class='"+v+"'><h1 class='"+a+"'>"+u.keyAccessor()(n)+"<\/h1><\/div>"};return u._doRender=function(){return u.selectAll("div."+s).remove(),w(y()),u},u._doRedraw=function(){return u._doRender()},u.size=function(n){return arguments.length?(h=n,u):h},u.html=function(n){return arguments.length?(c=n,u):c},u.htmlGroup=function(n){return arguments.length?(o=n,u):o},u.sortBy=function(n){return arguments.length?(f=n,u):f},u.order=function(n){return arguments.length?(e=n,u):e},u.anchor(t,r)},i.bubbleChart=function(n,t){function e(n){var t=n.enter().append("g");t.attr("class",r.BUBBLE_NODE_CLASS).attr("transform",f).append("circle").attr("class",function(n,t){return r.BUBBLE_CLASS+" _"+t}).on("click",r.onClick).attr("fill",r.getColor).attr("r",0);i.transition(n,r.transitionDuration()).selectAll("circle."+r.BUBBLE_CLASS).attr("r",function(n){return r.bubbleR(n)}).attr("opacity",function(n){return r.bubbleR(n)>0?1:0});r._doRenderLabel(t);r._doRenderTitles(t)}function o(n){i.transition(n,r.transitionDuration()).attr("transform",f).selectAll("circle."+r.BUBBLE_CLASS).attr("fill",r.getColor).attr("r",function(n){return r.bubbleR(n)}).attr("opacity",function(n){return r.bubbleR(n)>0?1:0});r.doUpdateLabels(n);r.doUpdateTitles(n)}function s(n){n.exit().remove()}function h(n){var t=r.x()(r.keyAccessor()(n));return isNaN(t)&&(t=0),t}function c(n){var t=r.y()(r.valueAccessor()(n));return isNaN(t)&&(t=0),t}var r=i.bubbleMixin(i.coordinateGridMixin({})),u=!1,f;return r.transitionDuration(750),f=function(n){return"translate("+h(n)+","+c(n)+")"},r.elasticRadius=function(n){return arguments.length?(u=n,r):u},r.plotData=function(){u&&r.r().domain([r.rMin(),r.rMax()]);r.r().range([r.MIN_RADIUS,r.xAxisLength()*r.maxBubbleRelativeSize()]);var n=r.chartBodyG().selectAll("g."+r.BUBBLE_NODE_CLASS).data(r.data(),function(n){return n.key});e(n);o(n);s(n);r.fadeDeselectedArea()},r.renderBrush=function(){},r.redrawBrush=function(){r.fadeDeselectedArea()},r.anchor(n,t)},i.compositeChart=function(t,r){function nt(){(u.rightY()===undefined||u.elasticY())&&(u.rightY(n.scale.linear()),u.rightY().domain([rt(),ft()]).rangeRound([u.yAxisHeight(),0]));u.rightY().range([u.yAxisHeight(),0]);u.rightYAxis(u.rightYAxis().scale(u.rightY()));u.rightYAxis().orient("right")}function tt(){(u.y()===undefined||u.elasticY())&&(u.y(n.scale.linear()),u.y().domain([it(),ut()]).rangeRound([u.yAxisHeight(),0]));u.y().range([u.yAxisHeight(),0]);u.yAxis(u.yAxis().scale(u.y()));u.yAxis().orient("left")}function b(n,t){n._generateG(u.g());n.g().attr("class",g+" _"+t)}function e(){return f.filter(function(n){return!n.useRightYAxis()})}function o(){return f.filter(function(n){return n.useRightYAxis()})}function k(n){return n.map(function(n){return n.yAxisMin()})}function it(){return n.min(k(e()))}function rt(){return n.min(k(o()))}function d(n){return n.map(function(n){return n.yAxisMax()})}function ut(){return i.utils.add(n.max(d(e())),u.yAxisPadding())}function ft(){return i.utils.add(n.max(d(o())),u.yAxisPadding())}function et(){return f.map(function(n){return n.xAxisMin()})}function ot(){return f.map(function(n){return n.xAxisMax()})}var g="sub",p=12,u=i.coordinateGridMixin({}),f=[],s={},h=!1,l=!0,a=n.svg.axis(),w=0,c=p,v,y=!1;return u._mandatoryAttributes([]),u.transitionDuration(500),i.override(u,"_generateG",function(){for(var n,i=this.__generateG(),t=0;t<f.length;++t)n=f[t],b(n,t),n.dimension()||n.dimension(u.dimension()),n.group()||n.group(u.group()),n.chartGroup(u.chartGroup()),n.svg(u.svg()),n.xUnits(u.xUnits()),n.transitionDuration(u.transitionDuration()),n.brushOn(u.brushOn()),n.renderTitle(u.renderTitle());return i}),u._brushing=function(){for(var t=u.extendBrush(),i=u.brushIsEmpty(t),n=0;n<f.length;++n)f[n].filter(null),i||f[n].filter(t)},u._prepareYAxis=function(){e().length!==0&&tt();o().length!==0&&nt();e().length>0&&!y?u._renderHorizontalGridLinesForAxis(u.g(),u.y(),u.yAxis()):o().length>0&&u._renderHorizontalGridLinesForAxis(u.g(),v,a)},u.renderYAxis=function(){e().length!==0&&(u.renderYAxisAt("y",u.yAxis(),u.margins().left),u.renderYAxisLabel("y",u.yAxisLabel(),-90));o().length!==0&&(u.renderYAxisAt("yr",u.rightYAxis(),u.width()-u.margins().right),u.renderYAxisLabel("yr",u.rightYAxisLabel(),90,u.width()-c))},u.plotData=function(){for(var n,t=0;t<f.length;++t)n=f[t],n.g()||b(n,t),h&&n.colors(u.colors()),n.x(u.x()),n.xAxis(u.xAxis()),n.useRightYAxis()?(n.y(u.rightY()),n.yAxis(u.rightYAxis())):(n.y(u.y()),n.yAxis(u.yAxis())),n.plotData(),n._activateRenderlets()},u.useRightAxisGridLines=function(n){return arguments?(y=n,u):y},u.childOptions=function(n){return arguments.length?(s=n,f.forEach(function(n){n.options(s)}),u):s},u.fadeDeselectedArea=function(){for(var t,n=0;n<f.length;++n)t=f[n],t.brush(u.brush()),t.fadeDeselectedArea()},u.rightYAxisLabel=function(n,t){return arguments.length?(w=n,u.margins().right-=c,c=t===undefined?p:t,u.margins().right+=c,u):w},u.compose=function(n){return f=n,f.forEach(function(n){n.height(u.height());n.width(u.width());n.margins(u.margins());l&&n.title(u.title());n.options(s)}),u},u.children=function(){return f},u.shareColors=function(n){return arguments.length?(h=n,u):h},u.shareTitle=function(n){return arguments.length?(l=n,u):l},u.rightY=function(n){return arguments.length?(v=n,u):v},delete u.yAxisMin,delete u.yAxisMax,i.override(u,"xAxisMin",function(){return i.utils.subtract(n.min(et()),u.xAxisPadding())}),i.override(u,"xAxisMax",function(){return i.utils.add(n.max(ot()),u.xAxisPadding())}),u.legendables=function(){return f.reduce(function(n,t){return h&&t.colors(u.colors()),n.push.apply(n,t.legendables()),n},[])},u.legendHighlight=function(n){for(var i,t=0;t<f.length;++t)i=f[t],i.legendHighlight(n)},u.legendReset=function(n){for(var i,t=0;t<f.length;++t)i=f[t],i.legendReset(n)},u.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},u.rightYAxis=function(n){return arguments.length?(a=n,u):a},u.anchor(t,r)},i.seriesChart=function(t,r){function a(t,i){return n.ascending(u.keyAccessor()(t),u.keyAccessor()(i))}function l(n){f[n].g()&&f[n].g().remove();delete f[n]}function s(){Object.keys(f).map(l);f={}}var u=i.compositeChart(t,r),f={},h=i.lineChart,c,e=n.ascending,o=a;return u._mandatoryAttributes().push("seriesAccessor","chart"),u.shareColors(!0),u._preprocessData=function(){var s=[],t,i=n.nest().key(c),a,v;e&&i.sortKeys(e);o&&i.sortValues(o);a=i.entries(u.data());v=a.map(function(i,e){var o=f[i.key]||h.call(u,u,r,i.key,e);return f[i.key]||(t=!0),f[i.key]=o,s.push(i.key),o.dimension(u.dimension()).group({all:n.functor(i.values)},i.key).keyAccessor(u.keyAccessor()).valueAccessor(u.valueAccessor()).brushOn(u.brushOn())});Object.keys(f).filter(function(n){return s.indexOf(n)===-1}).forEach(function(n){l(n);t=!0});u._compose(v);t&&u.legend()&&u.legend().render()},u.chart=function(n){return arguments.length?(h=n,s(),u):h},u.seriesAccessor=function(n){return arguments.length?(c=n,s(),u):c},u.seriesSort=function(n){return arguments.length?(e=n,s(),u):e},u.valueSort=function(n){return arguments.length?(o=n,s(),u):o},u._compose=u.compose,delete u.compose,u},i.geoChoroplethChart=function(t,r){function c(n){var i=v(),t;y(n)&&(t=p(n),b(t,n,i),k(t,n,i))}function v(){for(var i={},t=u.data(),n=0;n<t.length;++n)i[u.keyAccessor()(t[n])]=u.valueAccessor()(t[n]);return i}function y(n){return e(n).keyAccessor}function p(n){return u.svg().selectAll(w(n)).classed("selected",function(t){return l(n,t)}).classed("deselected",function(t){return a(n,t)}).attr("class",function(t){var u=e(n).name,f=i.utils.nameToId(e(n).keyAccessor(t)),r=u+" "+f;return l(n,t)&&(r+=" selected"),a(n,t)&&(r+=" deselected"),r})}function w(n){return"g.layer"+n+" g."+e(n).name}function l(n,t){return u.hasFilter()&&u.hasFilter(h(n,t))}function a(n,t){return u.hasFilter()&&!u.hasFilter(h(n,t))}function h(n,t){return e(n).keyAccessor(t)}function e(n){return f[n]}function b(t,r,f){var o=t.select("path").attr("fill",function(){var t=n.select(this).attr("fill");return t?t:"none"}).on("click",function(n){return u.onClick(n,r)});i.transition(o,u.transitionDuration()).attr("fill",function(n,t){return u.getColor(f[e(r).keyAccessor(n)],t)})}function k(n,t,i){u.renderTitle()&&n.selectAll("title").text(function(n){var r=h(t,n),f=i[r];return u.title()({key:r,value:f})})}var u=i.colorMixin(i.baseMixin({})),o,s,f;return u.colorAccessor(function(n){return n||0}),o=n.geo.path(),f=[],u._doRender=function(){var n,i,t;for(u.resetSvg(),n=0;n<f.length;++n)i=u.svg().append("g").attr("class","layer"+n),t=i.selectAll("g."+e(n).name).data(e(n).data).enter().append("g").attr("class",e(n).name),t.append("path").attr("fill","white").attr("d",o),t.append("title"),c(n);s=!1},u.onClick=function(n,t){var r=e(t).keyAccessor(n);i.events.trigger(function(){u.filter(r);u.redrawGroup()})},u._doRedraw=function(){for(var n=0;n<f.length;++n)c(n),s&&u.svg().selectAll("g."+e(n).name+" path").attr("d",o);s=!1},u.overlayGeoJson=function(n,t,i){for(var r=0;r<f.length;++r)if(f[r].name===t)return f[r].data=n,f[r].keyAccessor=i,u;return f.push({name:t,data:n,keyAccessor:i}),u},u.projection=function(n){return o.projection(n),s=!0,u},u.geoJsons=function(){return f},u.geoPath=function(){return o},u.removeGeoJson=function(n){for(var i,r=[],t=0;t<f.length;++t)i=f[t],i.name!==n&&r.push(i);return f=r,u},u.anchor(t,r)},i.bubbleOverlay=function(t,r){function a(){return f=u.select("g."+s),f.empty()&&(f=u.svg().append("g").attr("class",s)),f}function v(){var n=h();o.forEach(function(t){var r=c(t,n),f=r.select("circle."+e);f.empty()&&(f=r.append("circle").attr("class",e).attr("r",0).attr("fill",u.getColor).on("click",u.onClick));i.transition(f,u.transitionDuration()).attr("r",function(n){return u.bubbleR(n)});u._doRenderLabel(r);u._doRenderTitles(r)})}function h(){var n={};return u.data().forEach(function(t){n[u.keyAccessor()(t)]=t}),n}function c(n,t){var u=l+" "+i.utils.nameToId(n.name),r=f.select("g."+i.utils.nameToId(n.name));return r.empty()&&(r=f.append("g").attr("class",u).attr("transform","translate("+n.x+","+n.y+")")),r.datum(t[n.name]),r}function y(){var n=h();o.forEach(function(t){var r=c(t,n),f=r.select("circle."+e);i.transition(f,u.transitionDuration()).attr("r",function(n){return u.bubbleR(n)}).attr("fill",u.getColor);u.doUpdateLabels(r);u.doUpdateTitles(r)})}var s="bubble-overlay",l="node",e="bubble",u=i.bubbleMixin(i.baseMixin({})),f,o=[];return u.transitionDuration(750),u.radiusValueAccessor(function(n){return n.value}),u.point=function(n,t,i){return o.push({name:n,x:t,y:i}),u},u._doRender=function(){return f=a(),u.r().range([u.MIN_RADIUS,u.width()*u.maxBubbleRelativeSize()]),v(),u.fadeDeselectedArea(),u},u._doRedraw=function(){return y(),u.fadeDeselectedArea(),u},u.debug=function(t){var r,f;if(t){r=u.select("g."+i.constants.DEBUG_GROUP_CLASS);r.empty()&&(r=u.svg().append("g").attr("class",i.constants.DEBUG_GROUP_CLASS));f=r.append("text").attr("x",10).attr("y",20);r.append("rect").attr("width",u.width()).attr("height",u.height()).on("mousemove",function(){var t=n.mouse(r.node()),i=t[0]+", "+t[1];f.text(i)})}else u.selectAll(".debug").remove();return u},u.anchor(t,r),u},i.rowChart=function(t,r){function ft(){if(!f||w){var t=n.extent(l,u.cappedValueAccessor);t[0]>0&&(t[0]=0);f=n.scale.linear().domain(t).range([0,u.effectiveWidth()])}b.scale(f)}function et(){var n=e.select("g.axis");ft();n.empty()&&(n=e.append("g").attr("class","axis").attr("transform","translate(0, "+u.effectiveHeight()+")"));i.transition(n,u.transitionDuration()).call(b)}function ot(){e.selectAll("g.tick").select("line.grid-line").remove();e.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-u.effectiveHeight()})}function nt(){l=u.data();et();ot();var n=e.selectAll("g."+y).data(l);st(n);ht(n);ct(n)}function st(n){var t=n.enter().append("g").attr("class",function(n,t){return y+" _"+t});t.append("rect").attr("width",0);at(t);it(n)}function ht(n){n.exit().remove()}function tt(){var n=f(0);return n===-Infinity||n!==n?f(1):n}function ct(n){var r=l.length,t,e;t=c?c:(u.effectiveHeight()-(r+1)*h)/r;d||(o=t/2);e=n.attr("transform",function(n,i){return"translate(0,"+((i+1)*h+i*t)+")"}).select("rect").attr("height",t).attr("fill",u.getColor).on("click",s).classed("deselected",function(n){return u.hasFilter()?!rt(n):!1}).classed("selected",function(n){return u.hasFilter()?rt(n):!1});i.transition(e,u.transitionDuration()).attr("width",function(n){return Math.abs(tt()-f(u.valueAccessor()(n)))}).attr("transform",k);lt(n);it(n)}function lt(n){u.renderTitle()&&(n.selectAll("title").remove(),n.append("title").text(u.title()))}function at(n){if(u.renderLabel())n.append("text").on("click",s);if(u.renderTitleLabel())n.append("text").attr("class",p).on("click",s)}function it(n){var t,r;u.renderLabel()&&(t=n.select("text").attr("x",a).attr("y",o).attr("dy",ut).on("click",s).attr("class",function(n,t){return y+" _"+t}).text(function(n){return u.label()(n)}),i.transition(t,u.transitionDuration()).attr("transform",k));u.renderTitleLabel()&&(r=n.select("."+p).attr("x",u.effectiveWidth()-v).attr("y",o).attr("text-anchor","end").on("click",s).attr("class",function(n,t){return p+" _"+t}).text(function(n){return u.title()(n)}),i.transition(r,u.transitionDuration()).attr("transform",k))}function s(n){u.onClick(n)}function k(n){var t=f(u.cappedValueAccessor(n)),i=tt(),r=t>i?i:t;return"translate("+r+",0)"}function rt(n){return u.hasFilter(u.cappedKeyAccessor(n))}var e,a=10,o=15,d=!1,ut="0.35em",v=2,h=5,c=!1,y="row",p="titlerow",g=!1,u=i.capMixin(i.marginMixin(i.colorMixin(i.baseMixin({})))),f,w,b=n.svg.axis().orient("bottom"),l;return u.rowsCap=u.cap,u._doRender=function(){return u.resetSvg(),e=u.svg().append("g").attr("transform","translate("+u.margins().left+","+u.margins().top+")"),nt(),u},u.title(function(n){return u.cappedKeyAccessor(n)+": "+u.cappedValueAccessor(n)}),u.label(u.cappedKeyAccessor),u.x=function(n){return arguments.length?(f=n,u):f},u.renderTitleLabel=function(n){return arguments.length?(g=n,u):g},u._doRedraw=function(){return nt(),u},u.xAxis=function(){return b},u.fixedBarHeight=function(n){return arguments.length?(c=n,u):c},u.gap=function(n){return arguments.length?(h=n,u):h},u.elasticX=function(n){return arguments.length?(w=n,u):w},u.labelOffsetX=function(n){return arguments.length?(a=n,u):a},u.labelOffsetY=function(n){return arguments.length?(o=n,d=!0,u):o},u.titleLabelOffsetX=function(n){return arguments.length?(v=n,u):v},u.anchor(t,r)},i.legend=function(){function a(){return u+t}var v=2,n={},r,f=0,e=0,t=12,u=5,o=!1,s=560,h=70,c=!1,l;return n.parent=function(t){return arguments.length?(r=t,n):r},n.render=function(){var p,n,y,w;r.svg().select("g.dc-legend").remove();l=r.svg().append("g").attr("class","dc-legend").attr("transform","translate("+f+","+e+")");p=r.legendables();n=l.selectAll("g.dc-legend-item").data(p).enter().append("g").attr("class","dc-legend-item").on("mouseover",function(n){r.legendHighlight(n)}).on("mouseout",function(n){r.legendReset(n)}).on("click",function(n){n.chart.legendToggle(n)});l.selectAll("g.dc-legend-item").classed("fadeout",function(n){return n.chart.isLegendableHidden(n)});p.some(i.pluck("dashstyle"))?n.append("line").attr("x1",0).attr("y1",t/2).attr("x2",t).attr("y2",t/2).attr("stroke-width",2).attr("stroke-dasharray",i.pluck("dashstyle")).attr("stroke",i.pluck("color")):n.append("rect").attr("width",t).attr("height",t).attr("fill",function(n){return n?n.color:"blue"});n.append("text").text(i.pluck("name")).attr("x",t+v).attr("y",function(){return t/2+(this.clientHeight?this.clientHeight:13)/2-2});y=0;w=0;n.attr("transform",function(n,t){if(o){var r="translate("+y+","+w*a()+")",i=c===!0?this.getBBox().width+u:h;return y+i>=s?(++w,y=0):y+=i,r}return"translate(0,"+t*a()+")"})},n.x=function(t){return arguments.length?(f=t,n):f},n.y=function(t){return arguments.length?(e=t,n):e},n.gap=function(t){return arguments.length?(u=t,n):u},n.itemHeight=function(i){return arguments.length?(t=i,n):t},n.horizontal=function(t){return arguments.length?(o=t,n):o},n.legendWidth=function(t){return arguments.length?(s=t,n):s},n.itemWidth=function(t){return arguments.length?(h=t,n):h},n.autoItemWidth=function(t){return arguments.length?(c=t,n):c},n},i.scatterPlot=function(t,r){function a(t,r){var e=u.selectAll(".chart-body path.symbol").filter(function(){return t(n.select(this))}),o=f.size();f.size(Math.pow(r,2));i.transition(e,u.transitionDuration()).attr("d",f);f.size(o)}function v(n){var t=u.selectAll(".chart-body path.symbol").each(function(t){this.filtered=n&&n.isFiltered(t.key)});i.transition(t,u.transitionDuration()).attr("d",f)}var u=i.coordinateGridMixin({}),f=n.svg.symbol(),e=function(n){return n.value},c=u.keyAccessor();u.keyAccessor(function(n){return c(n)[0]});u.valueAccessor(function(n){return c(n)[1]});u.colorAccessor(function(){return u._groupName});var l=function(n){return"translate("+u.x()(u.keyAccessor()(n))+","+u.y()(u.valueAccessor()(n))+")"},o=3,s=5,h=0;return f.size(function(n){return e(n)?this.filtered?Math.pow(s,2):Math.pow(o,2):h}),i.override(u,"_filter",function(n){return arguments.length?u.__filter(i.filters.RangedTwoDimensionalFilter(n)):u.__filter()}),u.plotData=function(){var n=u.chartBodyG().selectAll("path.symbol").data(u.data());n.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",u.getColor).attr("transform",l);i.transition(n,u.transitionDuration()).attr("opacity",function(n){return e(n)?1:0}).attr("fill",u.getColor).attr("transform",l).attr("d",f);i.transition(n.exit(),u.transitionDuration()).attr("opacity",0).remove()},u.existenceAccessor=function(n){return arguments.length?(e=n,this):e},u.symbol=function(n){return arguments.length?(f.type(n),u):f.type()},u.symbolSize=function(n){return arguments.length?(o=n,u):o},u.highlightedSize=function(n){return arguments.length?(s=n,u):s},u.hiddenSize=function(n){return arguments.length?(h=n,u):h},u.legendables=function(){return[{chart:u,name:u._groupName,color:u.getColor()}]},u.legendHighlight=function(t){a(function(n){return n.attr("fill")===t.color},s);u.selectAll(".chart-body path.symbol").filter(function(){return n.select(this).attr("fill")!==t.color}).classed("fadeout",!0)},u.legendReset=function(t){a(function(n){return n.attr("fill")===t.color},o);u.selectAll(".chart-body path.symbol").filter(function(){return n.select(this).attr("fill")!==t.color}).classed("fadeout",!1)},u.setHandlePaths=function(){},u.extendBrush=function(){var n=u.brush().extent();return u.round()&&(n[0]=n[0].map(u.round()),n[1]=n[1].map(u.round()),u.g().select(".brush").call(u.brush().extent(n))),n},u.brushIsEmpty=function(n){return u.brush().empty()||!n||n[0][0]>=n[1][0]||n[0][1]>=n[1][1]},u._brushing=function(){var t=u.extendBrush(),n;u.redrawBrush(u.g());u.brushIsEmpty(t)?(i.events.trigger(function(){u.filter(null);u.redrawGroup()}),v(!1)):(n=i.filters.RangedTwoDimensionalFilter(t),i.events.trigger(function(){u.filter(null);u.filter(n);u.redrawGroup()},i.constants.EVENT_DELAY),v(n))},u.setBrushY=function(n){n.call(u.brush().y(u.y()))},u.anchor(t,r)},i.numberDisplay=function(t,r){var e="number-display",o=n.format(".2s"),u=i.baseMixin({}),f={one:"",some:"",none:""};return u._mandatoryAttributes(["group"]),u.html=function(n){return arguments.length?(n.none?f.none=n.none:n.one?f.none=n.one:n.some&&(f.none=n.some),n.one?f.one=n.one:n.some&&(f.one=n.some),n.some?f.some=n.some:n.one&&(f.some=n.one),u):f},u.value=function(){return u.data()},u.data(function(n){var t=n.value?n.value():n.top(1)[0];return u.valueAccessor()(t)}),u.transitionDuration(250),u._doRender=function(){var t=u.value(),i=u.selectAll("."+e);i.empty()&&(i=i.data([0]).enter().append("span").attr("class",e));i.transition().duration(u.transitionDuration()).ease("quad-out-in").tween("text",function(){var i=n.interpolateNumber(this.lastValue||0,t);return this.lastValue=t,function(n){var r=null,e=u.formatNumber()(i(n));t===0&&f.none!==""?r=f.none:t===1&&f.one!==""?r=f.one:f.some!==""&&(r=f.some);this.innerHTML=r?r.replace("%number",e):e}})},u._doRedraw=function(){return u._doRender()},u.formatNumber=function(n){return arguments.length?(o=n,u):o},u.anchor(t,r)},i.heatMap=function(t,r){function k(n,t){var r=u.selectAll(".box-group").filter(function(i){return i.key[n]===t}),f=r.filter(function(n){return!u.hasFilter(n.key)});i.events.trigger(function(){f.empty()?r.each(function(n){u.filter(n.key)}):f.each(function(n){u.filter(n.key)});u.redrawGroup()})}var a=6.75,f,v,y,e=n.ascending,o=n.ascending,d=n.scale.ordinal(),g=n.scale.ordinal(),s=a,h=a,u=i.colorMixin(i.marginMixin(i.baseMixin({}))),c,l;u._mandatoryAttributes(["group"]);u.title(u.colorAccessor());c=function(n){return n};l=function(n){return n};u.colsLabel=function(n){return arguments.length?(c=n,u):c};u.rowsLabel=function(n){return arguments.length?(l=n,u):l};var p=function(n){k(0,n)},w=function(n){k(1,n)},b=function(n){var t=n.key;i.events.trigger(function(){u.filter(t);u.redrawGroup()})};return i.override(u,"filter",function(n){return arguments.length?u._filter(i.filters.TwoDimensionalFilter(n)):u._filter()}),u.rows=function(n){return arguments.length?(y=n,u):y},u.rowOrdering=function(n){return arguments.length?(o=n,u):o},u.cols=function(n){return arguments.length?(v=n,u):v},u.colOrdering=function(n){return arguments.length?(e=n,u):e},u._doRender=function(){return u.resetSvg(),f=u.svg().append("g").attr("class","heatmap").attr("transform","translate("+u.margins().left+","+u.margins().top+")"),u._doRedraw()},u._doRedraw=function(){var w=u.data(),t=u.rows()||w.map(u.valueAccessor()),n=u.cols()||w.map(u.keyAccessor()),r,p,c,l,a,v;o&&(t=t.sort(o));e&&(n=n.sort(e));t=g.domain(t);n=d.domain(n);var k=t.domain().length,nt=n.domain().length,y=Math.floor(u.effectiveWidth()/nt),b=Math.floor(u.effectiveHeight()/k);n.rangeRoundBands([0,u.effectiveWidth()]);t.rangeRoundBands([u.effectiveHeight(),0]);r=f.selectAll("g.box-group").data(u.data(),function(n,t){return u.keyAccessor()(n,t)+'\0'+u.valueAccessor()(n,t)});p=r.enter().append("g").attr("class","box-group");p.append("rect").attr("class","heat-box").attr("fill","white").on("click",u.boxOnClick());return u.renderTitle()&&(p.append("title"),r.selectAll("title").text(u.title())),i.transition(r.selectAll("rect"),u.transitionDuration()).attr("x",function(t,i){return n(u.keyAccessor()(t,i))}).attr("y",function(n,i){return t(u.valueAccessor()(n,i))}).attr("rx",s).attr("ry",h).attr("fill",u.getColor).attr("width",y).attr("height",b),r.exit().remove(),c=f.selectAll("g.cols"),c.empty()&&(c=f.append("g").attr("class","cols axis")),l=c.selectAll("text").data(n.domain()),l.enter().append("text").attr("x",function(t){return n(t)+y/2}).style("text-anchor","middle").attr("y",u.effectiveHeight()).attr("dy",12).on("click",u.xAxisOnClick()).text(u.colsLabel()),i.transition(l,u.transitionDuration()).text(u.colsLabel()).attr("x",function(t){return n(t)+y/2}),l.exit().remove(),a=f.selectAll("g.rows"),a.empty()&&(a=f.append("g").attr("class","rows axis")),v=a.selectAll("text").data(t.domain()),v.enter().append("text").attr("dy",6).style("text-anchor","end").attr("x",0).attr("dx",-2).on("click",u.yAxisOnClick()).text(u.rowsLabel()),i.transition(v,u.transitionDuration()).text(u.rowsLabel()).attr("y",function(n){return t(n)+b/2}),v.exit().remove(),u.hasFilter()?u.selectAll("g.box-group").each(function(n){u.isSelectedNode(n)?u.highlightSelected(this):u.fadeDeselected(this)}):u.selectAll("g.box-group").each(function(){u.resetHighlight(this)}),u},u.boxOnClick=function(n){return arguments.length?(b=n,u):b},u.xAxisOnClick=function(n){return arguments.length?(p=n,u):p},u.yAxisOnClick=function(n){return arguments.length?(w=n,u):w},u.xBorderRadius=function(n){return arguments.length?(s=n,u):s},u.yBorderRadius=function(n){return arguments.length?(h=n,u):h},u.isSelectedNode=function(n){return u.hasFilter(n.key)},u.anchor(t,r)},function(){function t(n){return[0,n.length-1]}function i(t){return[n.quantile(t,.25),n.quantile(t,.5),n.quantile(t,.75)]}n.box=function(){function u(t){t.each(function(t,i){var b,it,rt,k,d,p,ut,g;t=t.map(h).sort(n.ascending);var v=n.select(this),nt=t.length,ft=t[0],et=t[nt-1],tt=t.quartiles=c(t),y=o&&o.call(this,t,i),w=y&&y.map(function(n){return t[n]}),ot=y?n.range(0,y[0]).concat(n.range(y[1]+1,nt)):n.range(nt),u=n.scale.linear().domain(e&&e.call(this,t,i)||[ft,et]).range([s,0]),a=this.__chart__||n.scale.linear().domain([0,Infinity]).range(u.range());this.__chart__=u;b=v.selectAll("line.center").data(w?[w]:[]);b.enter().insert("line","rect").attr("class","center").attr("x1",f/2).attr("y1",function(n){return a(n[0])}).attr("x2",f/2).attr("y2",function(n){return a(n[1])}).style("opacity",1e-6).transition().duration(r).style("opacity",1).attr("y1",function(n){return u(n[0])}).attr("y2",function(n){return u(n[1])});b.transition().duration(r).style("opacity",1).attr("y1",function(n){return u(n[0])}).attr("y2",function(n){return u(n[1])});b.exit().transition().duration(r).style("opacity",1e-6).attr("y1",function(n){return u(n[0])}).attr("y2",function(n){return u(n[1])}).remove();it=v.selectAll("rect.box").data([tt]);it.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(n){return a(n[2])}).attr("width",f).attr("height",function(n){return a(n[0])-a(n[2])}).transition().duration(r).attr("y",function(n){return u(n[2])}).attr("height",function(n){return u(n[0])-u(n[2])});it.transition().duration(r).attr("y",function(n){return u(n[2])}).attr("height",function(n){return u(n[0])-u(n[2])});rt=v.selectAll("line.median").data([tt[1]]);rt.enter().append("line").attr("class","median").attr("x1",0).attr("y1",a).attr("x2",f).attr("y2",a).transition().duration(r).attr("y1",u).attr("y2",u);rt.transition().duration(r).attr("y1",u).attr("y2",u);k=v.selectAll("line.whisker").data(w||[]);k.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",a).attr("x2",f).attr("y2",a).style("opacity",1e-6).transition().duration(r).attr("y1",u).attr("y2",u).style("opacity",1);k.transition().duration(r).attr("y1",u).attr("y2",u).style("opacity",1);k.exit().transition().duration(r).attr("y1",u).attr("y2",u).style("opacity",1e-6).remove();d=v.selectAll("circle.outlier").data(ot,Number);d.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",f/2).attr("cy",function(n){return a(t[n])}).style("opacity",1e-6).transition().duration(r).attr("cy",function(n){return u(t[n])}).style("opacity",1);d.transition().duration(r).attr("cy",function(n){return u(t[n])}).style("opacity",1);d.exit().transition().duration(r).attr("cy",function(n){return u(t[n])}).style("opacity",1e-6).remove();p=l||u.tickFormat(8);ut=v.selectAll("text.box").data(tt);ut.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(n,t){return t&1?6:-6}).attr("x",function(n,t){return t&1?f:0}).attr("y",a).attr("text-anchor",function(n,t){return t&1?"start":"end"}).text(p).transition().duration(r).attr("y",u);ut.transition().duration(r).text(p).attr("y",u);g=v.selectAll("text.whisker").data(w||[]);g.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",f).attr("y",a).text(p).style("opacity",1e-6).transition().duration(r).attr("y",u).style("opacity",1);g.transition().duration(r).text(p).attr("y",u).style("opacity",1);g.exit().transition().duration(r).attr("y",u).style("opacity",1e-6).remove()});n.timer.flush()}var f=1,s=1,r=0,e=null,h=Number,o=t,c=i,l=null;return u.width=function(n){return arguments.length?(f=n,u):f},u.height=function(n){return arguments.length?(s=n,u):s},u.tickFormat=function(n){return arguments.length?(l=n,u):l},u.duration=function(n){return arguments.length?(r=n,u):r},u.domain=function(t){return arguments.length?(e=t===null?t:n.functor(t),u):e},u.value=function(n){return arguments.length?(h=n,u):h},u.whiskers=function(n){return arguments.length?(o=n,u):o},u.quartiles=function(n){return arguments.length?(c=n,u):c},u}}(),i.boxPlot=function(t,r){function h(n){return function(t){for(var i=t.quartiles[0],r=t.quartiles[2],u=(r-i)*n,f=-1,e=t.length;t[++f]<i-u;);while(t[--e]>r+u);return[f,e]}}function a(n){var t=n.enter().append("g");t.attr("class","box").attr("transform",s).call(f).on("click",function(n){u.filter(n.key);u.redrawGroup()})}function v(t){i.transition(t,u.transitionDuration()).attr("transform",s).call(f).each(function(){n.select(this).select("rect.box").attr("fill",u.getColor)})}function y(n){n.exit().remove().call(f)}var u=i.coordinateGridMixin({}),c=h,l=c(1.5),f=n.box(),e=null,o=function(n,t){return u.isOrdinal()?u.x().rangeBand():n/(1+u.boxPadding())/t},s;return u.yAxisPadding(12),u.x(n.scale.ordinal()),u.xUnits(i.units.ordinal),u.data(function(n){return n.all().map(function(n){return n.map=function(t){return t.call(n,n)},n}).filter(function(n){var t=u.valueAccessor()(n);return t.length!==0})}),u.boxPadding=u._rangeBandPadding,u.boxPadding(.8),u.outerPadding=u._outerRangeBandPadding,u.outerPadding(.5),u.boxWidth=function(t){return arguments.length?(o=n.functor(t),u):o},s=function(n,t){var i=u.x()(u.keyAccessor()(n,t));return"translate("+i+", 0)"},u._preprocessData=function(){u.elasticX()&&u.x().domain([])},u.plotData=function(){var t=o(u.effectiveWidth(),u.xUnitCount()),n;f.whiskers(l).width(t).height(u.effectiveHeight()).value(u.valueAccessor()).domain(u.y().domain()).duration(u.transitionDuration()).tickFormat(e);n=u.chartBodyG().selectAll("g.box").data(u.data(),function(n){return n.key});a(n);v(n);y(n);u.fadeDeselectedArea()},u.fadeDeselectedArea=function(){u.hasFilter()?u.g().selectAll("g.box").each(function(n){u.isSelectedNode(n)?u.highlightSelected(this):u.fadeDeselected(this)}):u.g().selectAll("g.box").each(function(){u.resetHighlight(this)})},u.isSelectedNode=function(n){return u.hasFilter(n.key)},u.yAxisMin=function(){var t=n.min(u.data(),function(t){return n.min(u.valueAccessor()(t))});return i.utils.subtract(t,u.yAxisPadding())},u.yAxisMax=function(){var t=n.max(u.data(),function(t){return n.max(u.valueAccessor()(t))});return i.utils.add(t,u.yAxisPadding())},u.tickFormat=function(n){return arguments.length?(e=n,u):e},u.anchor(t,r)},i.abstractBubbleChart=i.bubbleMixin,i.baseChart=i.baseMixin,i.capped=i.capMixin,i.colorChart=i.colorMixin,i.coordinateGridChart=i.coordinateGridMixin,i.marginable=i.marginMixin,i.stackableChart=i.stackMixin,i.d3=n,i.crossfilter=t,i}if(typeof define=="function"&&define.amd)define(["d3","crossfilter"],t);else if(typeof module=="object"&&module.exports){var i=require("d3"),n=require("crossfilter");typeof n!="function"&&(n=n.crossfilter);module.exports=t(i,n)}else this.dc=t(d3,crossfilter)})();
//# sourceMappingURL=dc.min.js.map
